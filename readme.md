emqx_tcp_300_plugin

网关设备每次请求服务器之前都先做一次网关握手（参考知识库），成功后才会继续请求发数据。

To develop an EMQX TCP protocol plugin for your IoT project, particularly for integrating the protocol specified in your document (e.g., for alarm gateways and sensors), you’ll need to focus on customizing the TCP handling in EMQX, along with implementing the protocol specifics for data transfer and encoding.

Here’s a guideline on how to modify the development process and the plugin to support your project:

1. Project Setup

You will create an EMQX plugin that handles TCP communication instead of the default MQTT. The protocol described in your document will guide the data parsing, encoding, and responses for different device types (e.g., gateways, sensors, etc.).

2. Plugin Structure

Organize the plugin with modular components to support the different device types and their respective data formats (as seen in the document). A suggested structure:

emqx_tcp_300_plugin/
│
├── src/
│   ├── tcp_handler.erl         # Main TCP handler to manage socket communication
│   ├── protocol_parser.erl     # Parses the binary protocol based on the specs in your document
│   ├── gateway_handler.erl     # Handles gateway-specific messages (handshake, status, etc.)
│   ├── sensor_handler.erl      # Handles sensor-specific messages (e.g., temperature, CO2 sensors)
│   ├── alarm_handler.erl       # Handles alarm device-specific messages
│   └── utils/
│       ├── crc_util.erl        # Utility for CRC16 checks as described in the protocol
│       ├── bcd_util.erl        # Utility for BCD code parsing
│       ├── encoder.erl         # Handles encoding of responses to devices
│
├── include/
│   └── protocol.hrl            # Defines protocol constants, types, and formats
│
└── emqx_tcp_300_plugin.app.src      # Application descriptor

3. Implementing Core Components

3.1 TCP Handler

The TCP handler will listen for incoming connections on a specified port and manage the lifecycle of each TCP session. You’ll need to use gen_tcp for socket communication in Erlang.

-module(tcp_handler).
-behaviour(gen_server).

start_link() ->
    gen_server:start_link(?MODULE, [], []).

init(_) ->
    {ok, ListenSocket} = gen_tcp:listen(1883, [binary, {packet, raw}, {active, false}]),
    {ok, #state{listen_socket=ListenSocket}}.

handle_info({tcp, Socket, Data}, State) ->
    ParsedData = protocol_parser:parse(Data),
    Response = case ParsedData of
        {gateway, Msg} -> gateway_handler:process(Msg);
        {sensor, Msg}  -> sensor_handler:process(Msg);
        {alarm, Msg}   -> alarm_handler:process(Msg)
    end,
    gen_tcp:send(Socket, Response),
    {noreply, State}.

3.2 Protocol Parser

This module will decode the incoming binary data according to the structure defined in your document, especially focusing on the handshake packets, status reports, and various sensor data formats.

-module(protocol_parser).

parse(Data) ->
    <<Start:16, Length:8, Command:8, Payload/binary>> = Data,
    case Command of
        16#90 -> % Handshake
            {gateway, parse_handshake(Payload)};
        16#92 -> % Status Report
            {gateway, parse_status_report(Payload)};
        16#94 -> % Sensor Data
            {sensor, parse_sensor_data(Payload)};
        16#AE -> % Alarm Data
            {alarm, parse_alarm_data(Payload)};
        _     -> {error, unknown_command}
    end.

3.3 Gateway Handler

Handles gateway-specific logic such as handshake responses and status updates.

-module(gateway_handler).

process(Msg) ->
    case Msg of
        {handshake, GW_ID, Version} ->
            % Process handshake, return response
            encoder:encode_handshake_response(GW_ID, Version);
        {status_report, GW_ID, Status} ->
            % Process status report
            encoder:encode_status_ack(GW_ID, Status)
    end.

4. Protocol-Specific Implementations

Follow the data formats in your document (e.g., 2-byte temperature encoding, CRC16 checks, etc.).

4.1 CRC16 Utility

You will implement a CRC16 utility for packet verification, as described in the communication format.

-module(crc_util).

calc_crc(Data) ->
    %% Implement CRC16 algorithm here based on the protocol specification
    %% Ensure the CRC matches the format in your document
    ...

4.2 Encoding Responses

For encoding responses to the devices, you need to construct the response packets following the same protocol.

-module(encoder).

encode_handshake_response(GW_ID, Version) ->
    % Build the response packet according to the handshake response format
    <<16#EB, 16#EB, Length:8, 16#90, Version, GW_ID/binary, CRC:16, 16#BE, 16#BE>>.

5. Testing the Plugin

Ensure that your EMQX plugin handles:

	•	Incoming TCP connections for various device types.
	•	Correct parsing of binary data following the specs in your document.
	•	Responding correctly with appropriate responses (e.g., handshake responses, acknowledgments).
	•	Logging for debugging purposes to capture raw input/output data.

6. Deployment

	1.	Compile and package your plugin.
	2.	Deploy it to your EMQX instance.
	3.	Configure EMQX to start the TCP plugin, listening on a designated port for the device communications.

This structure should give you a good start on developing the EMQX TCP plugin for your specific protocol needs. The most important part will be correctly implementing the binary parsing and response encoding based on the detailed protocol descriptions in your document ￼.


---

冷链通讯接口协议

版本1.1.36

2024.09

概述

1.1协议说明

本协议是GW和SR之间、以及GW和SS之间的接口协议，简称冷链通讯协议。

通过应用冷链通讯协议，GW可以接入到SR，以实现各GW和SS之间的同步功能。

1.2使用范围

本协议适用于合作伙伴接入数据时参考。

1.3术语表

本协议用到以下术语：

GW网关，负责连接服务器

SS      传感器，负责采集传感数据

SR服务器

CSQ     移动网络信号，范围10-31，数值越大信号越好

RSSI    射频信号强度，-128~-20，数值越大信号越好

网关数据通讯格式

2.1网关握手数据格式

2.1.1网关握手包上报示例（网关→服务器）

| BE BE 04 90 01 01 A2 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始标志位 | 固定值 |
| 03 | 04 | 数据包总长度 | 固定值 |
| 04 | 90 | 命令位 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 00 00 | CRC16 | 设为0x00 0x00可以屏蔽CRC16校验的功能。 |
| 10 | EB EB | 结束位 | 固定值 |

 2.1.2服务器握手包反馈示例（服务器→网关）

| EB EB 04 90 01 01 A2 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始标志位 | 固定值 |
| 03 | 04 | 数据包总长度 | 固定值 |
| 04 | 90 | 命令位 | 固定值 |
| 05 | 01 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 10 | BE BE | 结束位 | 固定值 |

备注：

（1）数据包长度不符合协议要求，即视为失败。

（2）服务器收到后5秒内需作出反馈，否则网关无法确认反馈。

2.1.3（新协议）网关握手包上报示例（网关→服务器）网关长连接使用

| BE BE 08 90 02 01 A2 11 11 11 11 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始标志位 | 固定值 |
| 03 | 08 | 数据包总长度 | 固定值 |
| 04 | 90 | 命令位 | 固定值 |
| 05 | 02 | 协议版本 |  |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 00 00 | CRC16 | 设为0x00 0x00可以屏蔽CRC16校验的功能。 |
| 14 | EB EB | 结束位 | 固定值 |

 2.1.4（新协议）服务器握手包反馈示例（服务器→网关）

| EB EB 08 90 02 01 A2 11 11 11 11 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始标志位 | 固定值 |
| 03 | 08 | 数据包总长度 | 固定值 |
| 04 | 90 | 命令位 | 固定值 |
| 05 | 02 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 14 | BE BE | 结束位 | 固定值 |

2.2网关授时数据格式

 2.2.1网关授时上报示例：（网关→服务器）

| BE BE 0F 91 01 01 A2 11 11 11 11 17 08 10 11 35 00 01 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 0F | 总长度 | 固定值 |
| 04 | 91 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 17 08 10 11 35 00 | GW传输时间 | BCD码，格式：“17年08月10日11时35分00秒”。 |
| 18 | 01 | NTP OK | 网关开机成功后是否曾授时成功过； 0 = 没有； 1 = 成功过； other = 未定义； |
| 19 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 21 | EB EB | 结束位 | 固定值 |

2.2.2服务器授时反馈示例：（服务器→网关）

| EB EB 0E 91 01 01 A2 11 11 11 11 17 09 12 11 36 58 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 0E | 总长度 | 固定值 |
| 04 | 91 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 17 09 12 11 36 58 | 服务器传输时间 | 服务器时间，BCD码，格式：“17年09月12日11时26分58秒”。 |
| 18 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 20 | BE BE | 结束位 | 固定值 |

2.3网关上报状态数据格式

2.3.1网关状态数据上报示例：（网关→服务器）

| BE BE 2C 92 01 01 A2 59 11 11 11 11 17 09 11 15 13 00 10 68 00 01 00 01 00 00 00 00 00 11 69 1C 74 09 09 75 70 00 33 46 6E 00 00 06 6F 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 2C | 总长度 | 固定值 |
| 04 | 92 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 15 13 00 | GW传输时间 | BCD码，格式：“17年09月11日15时13分00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 01 | GW软件版本 |  |
| 23 | 00 01 | 客户码 | 固定值 |
| 25 | 00 | 转发策略 | 0 = 转发接收到的所有数据包； 1 = 只转发绑定设备的数据包； other = 未定义； |
| 26 | 00 | RAM |  |
| 27 | 00 00 00 | pflash已存数量 |  |
| 30 | 11 | 负载长度 | 固定值 |
| 31 | 69 | 类型 | 固定值 |
| 32 | 1C | CSQ | 网络信号强度，取值范围：10到31；数值越大，信号越强 |
| 33 | 74 | 类型 |  |
| 34 | 09 | Number | SG5：服务器端绑定Sensor设备的数量，最大值是64。SG6：网络类型 |
| 35 | 09 | Number | 网关端接收到Sensor设备的数量，最大值是64。 |
| 36 | 75 | 类型 | 固定值 |
| 37 | 70 00 33 46 | SIM No. | 若采集序列号是0，则： byte1： 是否连接充电器（1:正在充电，2:充电完成，3:未接电池，4:未知错误）； byte2： 设备重启原因； byte3*256+byte4： SIM卡MSIN的末尾4位； 若采集序列号不是0，则： byte1： 是否连接充电器；（1:正在充电，2:充电完成，3:未接电池，4:未知错误） byte2*256*256+byte3*256+byte4： SIM卡MSIN的末尾7位 |
| 41 | 6E | 类型 | 固定值 |
| 42 | 00 00 06 | 上次成功传输数量 | 上次上传到平台的数据量 |
| 45 | 6F | 类型 | 固定值 |
| 46 | 00 00 | 保留位 |  |
| 48 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 50 | EB EB | 结束位 | 固定值 |

网络类型说明：

0 – no service 

1 – GSM 

2 – GPRS 

3 – EGPRS (EDGE) 

4 – WCDMA 

5 – HSDPA only(WCDMA) 

6 – HSUPA only(WCDMA) 

7 – HSPA (HSDPA and HSUPA, WCDMA) 

8 – LTE 

9 – TDS-CDMA 

10 – TDS-HSDPA only 

11 – TDS- HSUPA only

12 – TDS- HSPA (HSDPA and HSUPA) 

13 – CDMA 

14 – EVDO 

15 – HYBRID (CDMA and EVDO) 

16 – 1XLTE(CDMA and LTE) 

23 – eHRPD 

24 – HYBRID(CDMA and eHRPD)

30 – 以太网

40 – WIFI

  

2.3.2服务器网关状态数据反馈示例：（服务器→网关）

| EB EB 04 92 01 01 A2 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 04 | 总长度 | 固定值 |
| 04 | 92 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 10 | BE BE | 结束位 | 固定值 |

2.3.3服务器下发绑定示例：（服务器→网关）

| EB EB 总长度 93 01 01 A2 11 11 11 11 01 01 00 00 00 01 配置长度 65 00 00 64 65 01 03 E8 66 00 13 88 66 01 17 70 73 名称长度 名称 00 00 BE BE |
| --- |

建议：下发间隔250ms以上

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 总长度 | 总长度 | 命令位开始（第一位），CRC前一位（CRC不算） |
| 04 | 93 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 01 | Total | 计划下发的设备信息的数量，最大值是64。 |
| 13 | 01 | CurrentNo. | 当前下发的设备信息的序列号，取值范围：1到64。 |
| 14 | 00 | Cmd | 0 = 新建或覆盖一个绑定关系； 1 = 删除一个绑定关系； other = 未定义； |
| 15 | 00 00 00 01 | SS ID | 需绑定的无线记录仪编号 |
| 19 | 00 | 配置长度 | 下一位数据类型“65”开始，到CRC前一位。 |
| 20 | 65 | 数据类型 | 固定值 |
| 21 | 00 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 22 | 00 64 | 温度阈值 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 24 | 65 | 数据类型 | 固定值 |
| 25 | 01 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 26 | 03 E8 | 温度阈值 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 28 | 66 | 数据类型 | 固定值 |
| 29 | 00 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 30 | 13 88 | 湿度阈值 | RH = (MSB*256+LSB)/100，单位：%； |
| 32 | 66 | 数据类型 | 固定值 |
| 33 | 01 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 34 | 17 70 | 湿度阈值 | RH = (MSB*256+LSB)/100，单位：%； |
| 36 | 73 | 数据类型 | 固定值 |
| 37 | 名称长度 | 名称长度 | 名称的长度，其最小值是0，最大值是30，单位：Byte，编码GB2312。 |
|  | 名称 | 名称 | 中文字符GB2312，最小值是0，最大值15，单位：个。 |
|  | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
|  | BE BE | 结束位 | 固定值 |

备注：

1、将温度或湿度转换为协议中的2个字节的算法

/// <summary>/// 将2个字节的浮点数转换成字节数组/// 适用于温湿度各种阈值的反相解算public static byte[] Double_2Bytes(double source){    source = source * 100;      if (source<0)      {        source += 65536;      }   byte[] result = new byte[2];

      if (source < 256)    {        result[0] = 0;        result[1] = (byte)source;     }else     {        result[0] = (byte)(source / 256);        result[1] = (byte)(source - result[0] * 256);     }

   return result; }

2.3.4服务器删除网关所有绑定示例：（服务器→网关）

| EB EB 08 97 01 01 A2 11 11 11 11 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 08 | 总长度 | 固定值 |
| 04 | 97 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID |  |
| 12 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 14 | BE BE | 结束位 | 固定值 |

2.4网关上报状态数据格式（新协议）

2.4.1网关状态数据上报示例：（网关→服务器）

| BE BE 35 92 02 01 A2 59 11 11 11 11 17 09 11 15 13 00 10 68 00 01 00 01 00 00 00 00 00 1A 69 1C 74 09 09 75 70 00 33 46 6E 00 00 06 6F 00 00 79 00 01 03 00 3C 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 35 | 总长度 | 固定值 |
| 04 | 92 | 命令 | 固定值 |
| 05 | 02 | 协议版本 |  |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 15 13 00 | GW传输时间 | BCD码，格式：“17年09月11日15时13分00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 01 | GW软件版本 |  |
| 23 | 00 01 | 客户码 | 固定值 |
| 25 | 00 | 转发策略 | 0 = 转发接收到的所有数据包； 1 = 只转发绑定设备的数据包； other = 未定义； |
| 26 | 00 | RAM |  |
| 27 | 00 00 00 | pflash已存数量 |  |
| 30 | 1A | 负载长度 | 固定值 |
| 31 | 69 | 类型 | 固定值 |
| 32 | 1C | CSQ | 网络信号强度，取值范围：10到31；数值越大，信号越强 |
| 33 | 74 | 类型 |  |
| 34 | 09 | Number | SG5：服务器端绑定Sensor设备的数量，最大值是64。SG6：网络类型 |
| 35 | 09 | Number | 网关端接收到Sensor设备的数量，最大值是64。 |
| 36 | 75 | 类型 | 固定值 |
| 37 | 70 00 33 46 | SIM No. | 若采集序列号是0，则： byte1： 是否连接充电器；（1:正在充电，2:充电完成，3:未接电池，4:未知错误） byte2： 设备重启原因； byte3*256+byte4： SIM卡MSIN的末尾4位； 若采集序列号不是0，则： byte1： 是否连接充电器；（1:正在充电，2:充电完成，3:未接电池，4:未知错误） byte2*256*256+byte3*256+byte4： SIM卡MSIN的末尾7位 |
| 41 | 6E | 类型 | 固定值 |
| 42 | 00 00 06 | 上次成功传输数量 | 上次上传到平台的数据量 |
| 45 | 6F | 类型 | 固定值 |
| 46 | 00 00 | 保留位 |  |
| 48 | 79 | 类型 |  |
| 49 | 00 | 保留位 |  |
| 50 | 01 | 版本区分 | 00：老协议（不下发行驶里程布局） 01：新协议（可下发行驶里程布局） |
| 51 | 03 | 是否启用GPS和蓝牙 | 00：停用 01：启用GPS 03：启用GPS和蓝牙 |
| 52 | 00 3C | GPS间隔 | 单位：秒 |
| 54 | 00 00 00 | 保留位 |  |
| 57 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 59 | EB EB | 结束位 | 固定值 |

网络类型说明：

0 – no service 

1 – GSM 

2 – GPRS 

3 – EGPRS (EDGE) 

4 – WCDMA 

5 – HSDPA only(WCDMA) 

6 – HSUPA only(WCDMA) 

7 – HSPA (HSDPA and HSUPA, WCDMA) 

8 – LTE 

9 – TDS-CDMA 

10 – TDS-HSDPA only 

11 – TDS- HSUPA only

12 – TDS- HSPA (HSDPA and HSUPA) 

13 – CDMA 

14 – EVDO 

15 – HYBRID (CDMA and EVDO) 

16 – 1XLTE(CDMA and LTE) 

23 – eHRPD 

24 – HYBRID(CDMA and eHRPD)

30 – 以太网

40 – WIFI

2.4.2服务器网关状态数据反馈示例：（服务器→网关）

| EB EB 04 92 02 01 A2 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 04 | 总长度 | 固定值 |
| 04 | 92 | 命令 | 固定值 |
| 05 | 02 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 10 | BE BE | 结束位 | 固定值 |

2.4.3服务器下发绑定示例：（服务器→网关）

| EB EB 总长度 93 02 01 A2 11 11 11 11 01 01 00 00 00 01 配置长度 65 00 00 64 65 01 03 E8 66 00 13 88 66 01 17 70 73 名称长度 名称 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 总长度 | 总长度 |  |
| 04 | 93 | 命令 | 固定值 |
| 05 | 02 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 01 | Total | 计划下发的设备信息的数量，最大值是64。 |
| 13 | 01 | CurrentNo. | 当前下发的设备信息的序列号，取值范围：1到64。 |
| 14 | 00 | Cmd | 0 = 新建或覆盖一个绑定关系； 1 = 删除一个绑定关系； other = 未定义； |
| 15 | 00 00 00 01 | SS ID | 需绑定的无线记录仪编号 |
| 19 | 配置长度 | 配置长度 | 下一位数据类型“65”开始，到CRC前一位。 |
| 20 | 65 | 数据类型 | 固定值 |
| 21 | 00 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 22 | 00 64 | 温度阈值 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 24 | 65 | 数据类型 | 固定值 |
| 25 | 01 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 26 | 03 E8 | 温度阈值 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 28 | 66 | 数据类型 | 固定值 |
| 29 | 00 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 30 | 13 88 | 湿度阈值 | RH = (MSB*256+LSB)/100，单位：%； |
| 32 | 66 | 数据类型 | 固定值 |
| 33 | 01 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 34 | 17 70 | 湿度阈值 | RH = (MSB*256+LSB)/100，单位：%； |
| 36 | 73 | 数据类型 | 固定值 |
| 37 | 名称长度 | 名称长度 | 名称的长度，其最小值是0，最大值是30，单位：Byte，编码GB2312。 |
|  | 名称 | 名称 | 中文字符，最小值是0，最大值15，单位：个。 |
|  | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
|  | BE BE | 结束位 | 固定值 |

2.4.4网关收到服务器下发绑定上报示例：（网关→服务器）

| BE BE 12 93 02 01 A2 11 11 11 11 01 01 00 00 00 00 01 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 12 | 总长度 | 固定值 |
| 04 | 93 | 命令 | 固定值 |
| 05 | 02 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID |  |
| 12 | 01 | Total | 计划下发的设备信息的数量，最大值是64。 |
| 13 | 01 | CurrentNo. | 当前下发的设备信息的序列号，取值范围：1到64。 |
| 14 | 00 | Cmd | 0 = 新建或覆盖一个绑定关系； 1 = 删除一个绑定关系； other = 未定义； |
| 15 | 00 00 00 01 | SS ID |  |
| 19 | 00 | Error | ≥0： 下发成功； ＜0： 下发失败（见下表1-1） |
| 20 | 00 00 | 保留位 |  |
| 22 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 24 | EB EB | 结束位 | 固定值 |

表1-1

| 编号 | 16进制 | 有符号数 | 说明 | 备注 |
| --- | --- | --- | --- | --- |
| 1 | FF | -1 | 数据包长度过小，不符合最低长度要求。 |  |
| 2 | FE | -2 | 数据包中的网关ID与本地的ID不一致。 |  |
| 3 | FD | -3 | 新建或覆盖绑定关系失败。失败的原因见备注。 | 1．配置长度错误2.报警条件的数量超出限制3.中文名称过长4.配置内容中的数据类型未定义 |
| 4 | FC | -4 | 删除绑定关系失败。失败的原因见备注。 | 不存在这样的一个绑定关系 |
| 5 | FB | -5 | 绑定指令未定义。 |  |
| 6 | FA | -6 | 收到正确的绑定/删除指令，但还有待接收的绑定/删除指令。 |  |

2.4.5服务器删除网关所有绑定示例：（服务器→网关）

| EB EB 08 97 02 01 A2 11 11 11 11 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 08 | 总长度 | 固定值 |
| 04 | 97 | 命令 | 固定值 |
| 05 | 02 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID |  |
| 12 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 14 | BE BE | 结束位 | 固定值 |

2.4.6网关收到服务器删除所有绑定上报示例：（网关→服务器）

| BE BE 0B 97 02 01 A2 11 11 11 11 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 0B | 总长度 | 固定值 |
| 04 | 97 | 命令 | 固定值 |
| 05 | 02 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID |  |
| 12 | 00 | Error | 0 = 下发成功； other = 下发失败 |
| 13 | 00 00 | 保留位 |  |
| 15 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 17 | EB EB | 结束位 | 固定值 |

2.5报警器下发绑定名称数据格式

2.5.1针对报警器，服务器下发绑定名称示例：（服务器→报警器）

| EB EB 总长度 AE 01 01 A2 11 11 11 11 01 01 00 00 00 01 配置长度 65 00 00 64 65 01 03 E8 66 00 13 88 66 01 17 70 73 名称长度 名称 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 总长度 | 总长度 |  |
| 04 | AE | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 固定值 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 01 | Total | 计划下发的设备信息的数量，最大值是64。 |
| 13 | 01 | CurrentNo. | 当前下发的设备信息的序列号，取值范围：1到64。 |
| 14 | 00 | Cmd | 0 = 新建或覆盖一个绑定关系； 1 = 删除一个绑定关系； other = 未定义； |
| 15 | 00 00 00 01 | SS ID | 需绑定的无线记录仪编号 |
| 19 | 配置长度 | 配置长度 | 下一位数据类型“65”开始，到CRC前一位。 |
| 20 | 65 | 数据类型 | 固定值 |
| 21 | 00 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 22 | 00 64 | 温度阈值 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 24 | 65 | 数据类型 | 固定值 |
| 25 | 01 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 26 | 03 E8 | 温度阈值 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 28 | 66 | 数据类型 | 固定值 |
| 29 | 00 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 30 | 13 88 | 湿度阈值 | RH = (MSB*256+LSB)/100，单位：%； |
| 32 | 66 | 数据类型 | 固定值 |
| 33 | 01 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 34 | 17 70 | 湿度阈值 | RH = (MSB*256+LSB)/100，单位：%； |
| 36 | 73 | 数据类型 | 固定值 |
| 37 | 名称长度 | 名称长度 | 名称的长度，其最小值是0，最大值是30，单位：Byte，编码GB2312。 |
|  | 名称 | 名称 | 中文字符，最小值是0，最大值15，单位：个。 |
|  | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
|  | BE BE | 结束位 | 固定值 |

2.5.2报警器收到服务器下发名称上报示例：（报警器→服务器）

| BE BE 12 AE 01 01 A2 11 11 11 11 01 01 00 00 00 00 01 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 12 | 总长度 | 固定值 |
| 04 | AE | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 对应收到的版本 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID |  |
| 12 | 01 | Total | 计划下发的设备信息的数量，最大值是64。 |
| 13 | 01 | CurrentNo. | 当前下发的设备信息的序列号，取值范围：1到64。 |
| 14 | 00 | Cmd | 0 = 新建或覆盖一个绑定关系； 1 = 删除一个绑定关系； other = 未定义； |
| 15 | 00 00 00 01 | SS ID |  |
| 19 | 00 | Error | ≥0： 下发成功； ＜0： 下发失败（见下表1-1） |
| 20 | 00 00 | 保留位 |  |
| 22 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 24 | EB EB | 结束位 | 固定值 |

2.6终端数据格式

2.6.1转发M1数据上报示例：（网关→服务器）

| BE BE 3D 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 51 03 1E 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 65 03 E8 66 13 88 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3D | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 12=按键后的第一条 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 51/5C/A9/6D | SS类型 | 51：M1-无线温湿度记录仪 5C：NTC版温度传感器 A9：M1000 6D：611 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1E | 负载长度 | 固定值(30-59) |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 若该设备为7系产品则：U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 65 | 类型 | 固定值 |
| 55 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 57 | 66 | 类型 | 固定值 |
| 58 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 60 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
| 61 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 62 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 64 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 65 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 67 | EB EB | 结束位 | 固定值 |

2.6.2转发M2数据上报示例：（网关→服务器）

| BE BE 3A 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 57 03 1B 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 65 03 E8 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3A | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 57 | SS类型 | 57：M2-无线温度记录仪 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1B | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 65 | 类型 | 固定值 |
| 55 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 57 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； other = 未定义； |
| 58 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 59 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 61 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 62 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 64 | EB EB | 结束位 | 固定值 |

2.6.3转发网关内置温湿度传感器数据上报示例：（网关→服务器）

| BE BE 3D 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 65 03 1E 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 23 00 68 C8 65 03 E8 66 13 88 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3D | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 65 | SS类型 | 65：网关内置有线温湿度传感器 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1E | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 23 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”，和SS采集时间相同。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | 保留位 |  |
| 54 | 65 | 类型 | 固定值 |
| 55 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 57 | 66 | 类型 | 固定值 |
| 58 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 60 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
| 61 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 62 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 64 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 65 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 67 | EB EB | 结束位 | 固定值 |

2.6.4转发网关内置温度传感器数据上报示例：（网关→服务器）

| BE BE 3D 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 67 03 1E 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 23 00 68 C8 65 03 E8 66 13 88 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3D | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 67 | SS类型 | 67：网关内置有线温度传感器 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1E | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 23 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”，和SS采集时间相同。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | 保留位 |  |
| 54 | 65 | 类型 | 固定值 |
| 55 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 57 | 66 | 类型 | 固定值 |
| 58 | 00 00 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 60 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
| 61 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 62 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 64 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 65 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 67 | EB EB | 结束位 | 固定值 |

2.6.5转发M4数据上报示例：（网关→服务器）

| BE BE 3D 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 58 02 1E 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 71 00 14 72 00 DC 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3D | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“年 月 日 时 分 秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线功率插座编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 01 | SS功能 |  |
| 27 | 58 | SS类型 | 58：M4-无线功率插座 |
| 28 | 02 | 协议版本 | SS协议版本 |
| 29 | 1E | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线功率插座上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 71 | 类型 | 固定值 |
| 55 | 00 14 | 负载功率 | 无符号数，负载功率 = MSB*256+LSB，单位：W； |
| 57 | 72 | 类型 | 固定值 |
| 58 | 00 DC | 插座电压 | 无符号数，插座电压的有效值 = MSB*256+LSB，单位：V； |
| 60 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； other = 未定义； |
| 61 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 62 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 64 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 65 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 67 | EB EB | 结束位 | 固定值 |

2.6.6转发M40数据上报示例：（网关→服务器）

| BE BE 39 94 03 00 01 60 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 7F 03 1A 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 82 00 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 39 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 60 | 设备类型 | 60：SG5 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“年 月 日 时 分 秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线门磁传感器编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 other = 未定义； |
| 26 | 01 | SS功能 |  |
| 27 | 7F | SS类型 | 7F：M40-无线门磁传感器 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1A | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线门磁传感器上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 82 | 类型 | 固定值 |
| 55 | 00 | 开关状态 | 开关状态；有符号数，若是负数，则表示采集失败；若是自然数，则：0=关闭，1=开启，2=开启->关闭，3=关闭->开启，other=未定义； |
| 56 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； other = 未定义； |
| 57 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 58 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 60 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 61 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 63 | EB EB | 结束位 | 固定值 |

2.6.7转发L1数据上报示例：（网关→服务器）

| BE BE 3A 94 03 00 01 60 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 85 03 1B 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 87 00 01 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3A | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 60 | 设备类型 | 60：SG5 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“年 月 日 时 分 秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线门磁传感器编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 01 | SS功能 |  |
| 27 | 85 | SS类型 | 85：L1-无线光照传感器 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1B | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线门磁传感器上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 87 | 类型 | 固定值 |
| 55 | 00 01 | 光照强度 | 光照强度，有符号数，单位：lux；若小于0，则表示采集失败； |
| 57 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； other = 未定义； |
| 58 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 59 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 61 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 62 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 64 | EB EB | 结束位 | 固定值 |

2.6.8转发M9数据上报示例：（网关→服务器）

| BE BE 39 94 03 00 01 60 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 77 03 1A 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 7F 00 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 39 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 60 | 设备类型 | 60：SG5 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“年 月 日 时 分 秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线震动传感器编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 01 | SS功能 |  |
| 27 | 77 | SS类型 | 77：M9-无线震动传感器 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1A | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线震动传感器上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 7F | 类型 | 固定值 |
| 55 | 00 | 运动状态 | 运动状态；有符号数，若是负数，则表示采集失败；若是自然数，则：0=静止，1=运动，2=运动->静止，3=静止->运动，other=未定义； |
| 56 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； other = 未定义； |
| 57 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 58 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 60 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 61 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 63 | EB EB | 结束位 | 固定值 |

2.6.9转发M5数据上报示例：（网关→服务器）

| BE BE 3B 94 03 00 01 60 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 7E 03 1C 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 84 00 83 00 00 01 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3B | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 60 | 设备类型 | 60：SG5 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“年 月 日 时 分 秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线门磁传感器编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 01 | SS功能 |  |
| 27 | 7E | SS类型 | 7E：M5-大气压强传感器 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1C | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 大气压强传感器上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 83 | 类型 | 固定值 |
| 55 | 00 00 01 | 压强 | 压强，单位：0.1Pa；有符号数，若是负数，则表示采集失败； |
| 58 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； other = 未定义； |
| 59 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 60 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 62 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 63 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 65 | EB EB | 结束位 | 固定值 |

2.6.10转发SK数据上报示例：（网关→服务器）

| BE BE 48 94 01 00 01 60 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 03 8A 03 2E 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 8A 01 89 02 00 00 10 00 10 00 05 00 10 00 10 00 00 01 00 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 |  | 总长度 | 固定值，命令位开始，CRC之前 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 60 | 设备类型 | 60：SG5 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“年 月 日 时 分 秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 智能插座编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 03 | SS功能 |  |
| 27 | 8A | SS类型 | 8A：智能插座 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 |  | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | 传输序列号 | 传感器上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | 操作开始时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 8A | 类型 |  |
| 55 | 08 | 节点数量 | 表示本条数据包所包含的传感器数据包的数量，最大值为8 |
| 节点一 | 89 | 类型 | 固定值 |
| 节点一 | 02 | 操作类型 | 0：无操作； 1：正常打； 2：正常打截停； 3：截停； other：未定义； |
| 节点一 | 00 00 10 | 开始时间的增量 | 基于开始时间的增量，单位：ms；操作开始时间+开始时间的增量为节点一的开始时间 |
| 节点一 | 00 10 | 正常打持续时间 | 正常打的持续时间，单位：ms； |
| 节点一 | 00 05 | 正常打的电流 | 正常打的平均电流，单位：mA； |
| 节点一 | 00 10 | 截停持续时间 | 截停的持续时间，单位：ms；无截停该值为0 |
| 节点一 | 00 10 | 截停电流 | 截停阶段的峰值电流，单位：mA；无截停该值为0 |
| 节点一 | 00 00 | 保留位 | 固定值 |
| 节点二 |  | 节点2 |  |
| 最大节点 |  | …… | 最大值为4 |
|  | 01 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； other = 未定义； |
|  | 00 | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
|  | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
|  | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
|  | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
|  | EB EB | 结束位 | 固定值 |

2.6.11转发AC2数据上报示例：（网关→服务器）

| BE BE 44 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 8F 03 25 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 8B 00 00 00 00 00 00 00 00 00 00 00 00 01 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 44 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 8F | SS类型 | AC2 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 25 | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 8B | 类型 | 固定值 |
| 55 | 00 00 | Inflow | 单位：0.01mps； |
| 57 | 00 00 | downflow | 单位：0.01mps； |
| 59 | 00 00 | temperature | 单位：0.01℃； |
| 61 | 00 00 | inflow status | 0： uncalib； 1： fail； 2： OK； other： 未定义； |
| 63 | 00 00 | fan status | 0： off； 1： on； other： 未定义； |
| 65 | 00 00 | Sash status | 0： unsafe； 8： safe； 16： fullyclose； 24： errorpos； other： 未定义； |
| 67 | 01 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； other = 未定义； |
| 68 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 69 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 71 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 72 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 74 | EB EB | 结束位 | 固定值 |

2.6.12转发TEC 3000数据上报示例：（网关→服务器）

| BE BE 40 94 03 00 01 6A 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 99 03 21 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 8D 00 00 00 00 00 00 01 01 01 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 40 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 6A | 设备类型 | 6A：4G网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 99 | SS类型 | M26 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 21 | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 8D | 类型 | 固定值 |
| 55 | 00 00 | 温度A | 大端存储，有符号数，单位：0.01； |
| 57 | 00 00 | 温度B | 大端存储，有符号数，单位0.01； |
| 59 | 00 00 | 液位 | 大端存储，无符号数，单位：0.01 |
| 61 | 01 | 温度单位 | 温度的单位： 1=摄氏度 ℃； 2=华氏度 ℉； 3=开尔文 K； |
| 62 | 01 | 液位单位 | 液位的单位： 1=英寸 in； 2=Millimeters mm； 3=百分比 %； |
| 63 | 01 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； other = 未定义； |
| 64 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 65 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 67 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 68 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 70 | EB EB | 结束位 | 固定值 |

2.6.13转发电子锁（EK）数据上报示例：（网关→服务器）

| BE BE 41 94 03 00 01 6A 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 9D 03 22 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 8E 01 01 00 00 00 00 00 00 00 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 41 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 6A | 设备类型 | 6A：SG6 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 9D | SS类型 | 9D：智能电子锁 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 22 | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 8E | 类型 | 固定值 |
| 55 | 01 | 电子锁事件 | 有符号数； <0： 错误； 0： 定时上报状态； 1： 关门； 2： 常规操作，即：刷卡、开门、关门； 3： 钥匙开锁； 4： 非法尝试，即检测到未授权的卡片尝试开锁； 5： 异常开锁； 6： 门开超时报警； 7： 刷卡未开门； other： 未定义； |
| 56 | 01 00 00 00 | RFID |  |
| 60 | 00 | 保留位 |  |
| 61 | 00 | 保留位 |  |
| 62 | 00 00 | 保留位 |  |
| 64 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
| 65 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 66 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 68 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 69 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 71 | EB EB | 结束位 | 固定值 |

2.6.14转发TM数据上报示例：（网关→服务器）

| BE BE 3D 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 AD 03 1E 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 65 03 E8 A2 00 01 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3D | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | TM编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | AD | SS类型 | AD：TM |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1E | 负载长度 | 固定值(30-59) |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 65 | 类型 | 固定值 |
| 55 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 57 | A2 | 类型 | 固定值 |
| 58 | 00 01 | 液位 | 液位，无符号整型数，单位：mm； |
| 60 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
| 61 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 62 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 64 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 65 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 67 | EB EB | 结束位 | 固定值 |

2.6.15转发大屏液氮罐数据上报示例：（网关→服务器）

| BE BE 3D 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 AD 03 1E 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 C6 03 E8 C7 03 E8 C8 03 E8 C9 00 01 CA 00 00 CB 00 00 CC 00 00 CD 00 00 CE 00 00 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3D | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | TM编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | AD | SS类型 | AD：TM |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1E | 负载长度 | 固定值(30-59) |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | C6 | 类型 |  |
| 55 | 03 E8 | A点温度 | 温度，有符号整型数，单位：0.1℃ |
| 57 | C7 | 类型 |  |
| 58 | 03 E8 | B点温度 | 温度，有符号整型数，单位：0.1℃ |
| 60 | C8 | 类型 |  |
| 61 | 03 E8 | C点温度 | 温度，有符号整型数，单位：0.1℃ |
| 63 | C9 | 类型 |  |
| 64 | 00 01 | 液位 | 液位，无符号整型数，单位：mm |
| 66 | CA | 类型 |  |
| 67 | 00 00 | 告警状态1 | 无符号整型数， bit0: 低液位报警 bit1: 高液位报警 bit2: 充液超时报警 bit3: 排气超时报警(无液氮报警) bit4: A传感器断线报警 bit5: B传感器断线报警 bit6: C传感器断线报警 bit7: A低温报警 bit8: B低温报警 bit9: 预留 bit10: A高温报警 bit11: B高温报警 bit12: 预留 bit13: 开盖报警 bit14: 液氮消耗报警 |
| 69 | CB | 类型 |  |
| 70 | 00 00 | 进液电磁阀 | 无符号整型数 |
| 72 | CC | 类型 |  |
| 73 | 00 00 | 排气电磁阀 | 无符号整型数 |
| 75 | CD | 类型 |  |
| 76 | 00 00 | 吹扫电磁阀 | 无符号整型数 |
| 78 | CE | 类型 |  |
| 79 | 00 00 | 预留电磁阀 | 无符号整型数 |
| 81 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
| 82 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 83 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 85 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 86 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 88 | EB EB | 结束位 | 固定值 |

2.6.16转发M2-H水浸传感器数据上报示例：（网关→服务器）

| BE BE 42 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 B7 03 23 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 AA 00 00 FF FF FF FF 00 00 FF FF 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 42 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 12=按键后的第一条 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | B7 | SS类型 | B7：水浸传感器 5C：NTC版温度传感器 A9：M1000 6D：611 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 23 | 负载长度 | 固定值(30-59) |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | AA | 类型 | 固定值 |
| 55 | 00 | 采集结果 | 有符号数，若＜0，则认为是采集失败；若≥0，则采集成功。 |
| 56 | 00 | 是否浸水 | 无符号数，0=无浸水， 1=有浸水；当前阻值小于报警阻值时，判定为浸水； |
| 57 | FF FF FF FF | 当前阻值 | 无符号数，单位：Ω； |
| 61 | 00 00 FF FF | 阈值 | 无符号数，单位：Ω； |
| 65 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
| 66 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 67 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 69 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 70 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 72 | EB EB | 结束位 | 固定值 |

2.6.17转发透传数据上报示例：（网关→服务器）（停用）

|  |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 |  | 总长度 |  |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 12=按键后的第一条 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 51/5C/A9/6D | SS类型 | 51：M1-无线温湿度记录仪 5C：NTC版温度传感器 A9：M1000 6D：611 |
| 28 | 02 | 协议版本 | SS协议版本 |
| 29 |  | 负载长度 |  |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
|  | AE | 类型 |  |
|  |  | 长度 | 最大值是59 |
|  |  | 透传数据内容 |  |
|  | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
|  | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
|  | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
|  | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
|  | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
|  | EB EB | 结束位 | 固定值 |

2.6.18转发透传数据上报示例：（网关→服务器）

|  |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 |  | 总长度 |  |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 12=按键后的第一条 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | B1 | SS类型 | M4000 |
| 28 | 02 | 协议版本 | SS协议版本 |
| 29 |  | 负载长度 |  |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
|  | B0 | 类型 |  |
|  | 00 00 | 分包标识 | 同一标识：同一组数据包 |
|  | 02 | 分包总数 |  |
|  | 00 | 分包序号 | 从0开始计数 |
|  | 10 | 长度 | 最大值是55Bytes |
|  |  | 透传数据内容 | 每个包长度最大55 |
|  | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
|  | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
|  | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
|  | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
|  | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
|  | EB EB | 结束位 | 固定值 |

2.6.19转发485通用数据上报示例：（网关→服务器）

|  |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 |  | 总长度 |  |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 12=按键后的第一条 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | B1 | SS类型 | M4000 |
| 28 | 02 | 协议版本 | SS协议版本 |
| 29 |  | 负载长度 |  |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
|  | AB | 类型 | 通用485设备的数据类型 |
|  | 00 00 | UID |  |
|  | 02 | 总量 | Modbus字段的总数量 |
|  | 00 | 序号 | Modbus字段的序号，从0开始计数。 |
|  | AC | 数据类型 |  |
|  | 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 | 数据名称 | 数据名称，字符串，编码：GB2312。 |
|  | 01 | 数据格式 | 0:无; 1:Int32; 2:UInt32; 3:Float; other: none; |
|  | 00 | 小数位数 | 0： 整数； 1： 一位小数； 2： 两位小数； 3： 三位小数； 4： 四位小数； |
|  | 00 00 00 00 | 数据内容 | 大端存储 |
|  | 00 00 00 00 | 单位符号 | 单位符号，字符串，编码：GB2312。 例： ℃，%，m，s，uSv，Pa |
|  | 00 | 报警状态 | 0：正常 非0：异常 |
|  | AC | 数据类型 |  |
|  | 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 | 数据名称 | 数据名称，字符串，编码：GB2312。 |
|  | 01 | 数据格式 | 0:无; 1:Int32; 2:UInt32; 3:Float; other: none; |
|  | 00 | 小数位数 | 0： 整数； 1： 一位小数； 2： 两位小数； 3： 三位小数； 4： 四位小数； |
|  | 00 00 00 00 | 数据内容 | 大端存储 |
|  | 00 00 00 00 | 单位符号 | 单位符号，字符串，编码：GB2312。 例： ℃，%，m，s，uSv，Pa |
|  | 00 | 报警状态 | 0：正常 非0：异常 |
|  | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
|  | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
|  | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
|  | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
|  | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
|  | EB EB | 结束位 | 固定值 |

2.6.20转发485通用数据上报示例：（网关→服务器）（新协议）

|  |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 |  | 总长度 |  |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 12=按键后的第一条 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | B1 | SS类型 | M4000 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 |  | 负载长度 |  |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
|  | B1 | 类型 | 通用485设备的数据类型 |
|  | 00 00 | 具体485设备类型 | 0001：485电表 0002：485液氮罐盖子 0003：485土壤传感器 0004：485过氧化氢传感器（H2O2,RELA,T,H） 0005：CBS170 CO2培养箱 0006：水站设备 0007：维萨拉DMT143露点仪 0008：TEC3000，6项数值 0009：气象站（6要素） |
|  | 00 00 | UID |  |
|  | 02 | 总量 | Modbus字段的总数量 |
|  | 00 | 序号 | Modbus字段的序号，从0开始计数。 |
|  | AC | 数据类型 |  |
|  | 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 | 数据名称 | 数据名称，字符串，编码：GB2312。 |
|  | 01 | 数据格式 | 0:无; 1:Int32; 2:UInt32; 3:Float; other: none; |
|  | 00 | 小数位数 | 0： 整数； 1： 一位小数； 2： 两位小数； 3： 三位小数； 4： 四位小数； |
|  | 00 00 00 00 | 数据内容 | 大端存储 |
|  | 00 00 00 00 | 单位符号 | 单位符号，字符串，编码：GB2312。 例： ℃，%，m，s，uSv，Pa |
|  | 00 | 报警状态 | 0：正常 非0：异常 |
|  | AC | 数据类型 |  |
|  | 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 | 数据名称 | 数据名称，字符串，编码：GB2312。 |
|  | 01 | 数据格式 | 0:无; 1:Int32; 2:UInt32; 3:Float; other: none; |
|  | 00 | 小数位数 | 0： 整数； 1： 一位小数； 2： 两位小数； 3： 三位小数； 4： 四位小数； |
|  | 00 00 00 00 | 数据内容 | 大端存储 |
|  | 00 00 00 00 | 单位符号 | 单位符号，字符串，编码：GB2312。 例： ℃，%，m，s，uSv，Pa |
|  | 00 | 报警状态 | 0：正常 非0：异常 |
|  | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
|  | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
|  | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
|  | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
|  | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
|  | EB EB | 结束位 | 固定值 |

2.6.21转发485从机数据上报示例：（网关→服务器）

| BE BE 54 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 B1 03 1E 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 B2 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 54 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 12=按键后的第一条 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | B1 | SS类型 | M4000 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1E | 负载长度 | 固定值(30-59) |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | B2 | 类型 |  |
| 55 | 00 00 | A点温度 |  |
| 57 | 00 00 | B点温度 |  |
| 59 | 00 00 | C点温度 |  |
| 61 | 00 00 | 液位高度 |  |
| 63 | 00 00 | 告警状态1 |  |
| 65 | 00 00 | 告警状态2 |  |
| 67 | 00 00 | 进液电磁阀 |  |
| 69 | 00 00 | 排气电磁阀 |  |
| 71 | 00 00 | 吹扫电磁阀 |  |
| 73 | 00 00 | 保留位 |  |
| 75 | 00 00 | 保留位 |  |
| 77 | 00 00 | 保留位 |  |
| 79 | 00 00 | 保留位 |  |
| 81 | 00 00 | 保留位 |  |
| 83 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
| 84 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 85 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 87 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 89 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 90 | EB EB | 结束位 | 固定值 |

2.6.22上传二氧化碳M30通道1/通道2的数据上报示例：（网关→服务器）

| BE BE 3D 94 01 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 51 03 1E 61 00 10 63 14 64 10 68 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 65 03 E8 66 13 88 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3D | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 79 | SS类型 | 二氧化碳单独一路温湿度的类型 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1E | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 10 68 | SS电压 | Value = MSB*256 + LSB；若是Value.bit15=0，则表示设备未接充电器；若是Value.bit15=1，则表示设备已接充电器；电压U = (Value & 0x7FFF)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 65 | 类型 | 固定值 |
| 55 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 57 | 66 | 类型 | 固定值 |
| 58 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 60 | 00 | L/H | 1 = 历史数据； other = 未定义； |
| 61 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 62 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 64 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 65 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 67 | EB EB | 结束位 | 固定值 |

2.6.23上传M30的CO2数据上报示例：（网关→服务器）

| BE BE 45 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 B1 03 26 61 00 10 63 14 64 10 68 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 65 03 E8 66 13 88 7B 00 00 00 7C 00 00 00 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 45 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 78/C9/B1/BC | SS类型 | CO2传感器/M700-1-GMP251/M4000/M700-1接GMP251修改debug |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 26 | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 10 68 | SS电压 | Value = MSB*256 + LSB；若是Value.bit15=0，则表示设备未接充电器；若是Value.bit15=1，则表示设备已接充电器；电压U = (Value & 0x7FFF)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 65 | 类型 | 固定值 |
| 55 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 57 | 66 | 类型 | 固定值 |
| 58 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 60 | 7B | 类型 |  |
| 61 | 00 00 00 | CO2浓度 | 滤波后CO2浓度，无符号数，单位：ppm。 |
| 64 | 7C | 类型 |  |
| 65 | 00 00 00 | 保留位 |  |
| 68 | 00 | L/H | 1 = 历史数据； other = 未定义； |
| 69 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 70 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 72 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 73 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 75 | EB EB | 结束位 | 固定值 |

2.6.24上传O2数据上报示例：（网关→服务器）

| BE BE 45 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 7A 03 26 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 65 03 E8 66 13 88 7D 00 00 00 7E 00 00 00 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 45 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | 7A | SS类型 | O2传感器 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 26 | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 65 | 类型 | 固定值 |
| 55 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 57 | 66 | 类型 | 固定值 |
| 58 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 60 | 7D | 类型 |  |
| 61 | 00 00 00 | O2浓度 | 滤波后O2浓度，无符号数，单位：ppm。 |
| 64 | 7E | 类型 |  |
| 65 | 00 00 00 | 保留位 |  |
| 68 | 00 | L/H | 1 = 历史数据； other = 未定义； |
| 69 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 70 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 72 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 73 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 75 | EB EB | 结束位 | 固定值 |

2.6.25转发压差（feel）数据上报示例：（M700E→服务器）

| BE BE 3E 94 03 00 01 D5 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 D7 03 1F 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 86 00 D7 00 02 00 00 00 1A 00 00 1F 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3E | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | D5 | 设备类型 | D5：M700E |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“年 月 日 时 分 秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 无线门磁传感器编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； other = 未定义； |
| 26 | 01 | SS功能 |  |
| 27 | D7 | SS类型 | ：feel压差传感器 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 1F | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 大气压强传感器上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | 86 | 数据类型 | 固定值 |
| 55 | 00 | 采集结果 | 有符号数；>=0，则表示采集成功；<0，则表示采集失败； |
| 56 | D7 | 数据类型 | 固定值 |
| 57 | 00 02 00 00 | 压差 | Int32，单位：0.0001Pa，示例：13.1072pa； |
| 61 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； other = 未定义； |
| 62 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 63 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 65 | 1F | CSQ | 以太网设备，默认1F |
| 66 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 68 | EB EB | 结束位 | 固定值 |

2.6.26服务器终端数据反馈示例：（服务器→网关）

| EB EB 05 94 03 00 01 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 05 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 | 对应收到的版本 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 00 | Status |  |
| 09 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 11 | BE BE | 结束位 | 固定值 |

2.7网关定位数据格式

2.7.1网关定位数据上报示例：（网关→服务器）

| BE BE 24 9F 01 00 01 60 11 11 11 11 18 08 11 16 46 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 24 | 总长度 | 固定值 |
| 04 | 9F | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 60 | 设备类型 | 60：SG5 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 18 08 11 16 46 00 | GW传输时间 | 东八区时间，BCD码，格式：“18年08月11日16时46分 00秒”。 |
| 19 | 00 | status | 0 = GPS数据；（大地坐标系） 1 = LBS数据；（火星坐标系） 2 = 数据无效； other = 未定义； |
| 20 | 00 00 | 保留位 |  |
| 22 | 00 00 00 00 00 00 00 00 | GPS位置信息 | GPS位置信息，byte1, byte2, byte3, byte4, byte5, byte6, byte7, byte8; 经度，有符号数，longitude = (byte1*256*256*256+byte2*256*256+byte3*256+byte4)/1000000，单位：1°；如果longitude小于0则表示西经；如果longitude大于0则表示东经。 纬度，有符号数，latitude = (byte5*256*256*256+byte6*256*256+byte7*256+byte8)/1000000，单位：1°；如果latitude小于0则表示南纬；如果latitude大于0则表示北纬。 |
| 30 | 00 00 | 方向 | 方向，是相对于真北的输出，单位：0.01° |
| 32 | 00 01 | 速度 | 速度，单位: 0.1Km/h。 |
| 34 | 00 00 00 00 00 00 | 保留位 |  |
| 40 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 42 | EB EB | 结束位 | 固定值 |

2.7．2服务器定位数据反馈示例：（服务器→网关）

| EB EB 09 9F 01 00 01 11 11 11 11 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 09 | 总长度 | 固定值 |
| 04 | 9F | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 对应收到的版本 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 00 | ERROR | 0 = 成功； other = 未定义； |
| 13 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 15 | BE BE | 结束位 | 固定值 |

2.8网关运输模式数据格式

2.8.1网关运输状态数据上报示例：（网关→服务器）

| BE BE 56 A0 01 00 01 59 11 11 11 11 19 04 11 16 46 00 00 01 00 00 19 04 11 16 45 00 10 68 00 00 00 00 00 00 00 00 1E 00 00 00 01 00 00 00 00 00 00 01 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 01 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 56 | 总长度 | 固定值 |
| 04 | A0 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla-网关 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 19 04 11 16 46 00 | GW传输时间 | BCD码，格式：“年 月 日 时 分 秒”。 |
| 19 | 00 01 | 运输码 | 每次运输过程独立编码 |
| 21 | 00 | 站点类型 | 0： 启运； 1： 经停站； 2： 终点站； 3： 停运 |
| 22 | 01 | 站点序号 | 经停站序列，01开始 |
| 23 | 19 04 11 16 45 00 | 首发时间/到站时间 |  |
| 29 | 10 68 | GW电压 | U = (MSB*256+LSB)/1000， U表示电池电压，单位：V。 |
| 31 | 00 | 接入充电 | 00：未接入充电器 01：接入充电器 |
| 32 | 00 00 | MCC | 移动国家码 |
| 34 | 00 | MNC | 移动网络码 |
| 35 | 00 00 00 00 | MSIN | 移动用户识别号码 |
| 39 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 40 | 00 | 保留位 |  |
| 41 | 00 | 转发策略 | 0 = 转发接收到的所有数据包； 1 = 只转发绑定设备的数据包； other = 未定义； |
| 42 | 00 | 绑定数量 | 服务器端绑定Sensor设备的数量，最大值是64。 |
| 43 | 01 | 接收数量 | 网关端接收到Sensor设备的数量，最大值是64 |
| 44 | 00 | RAM |  |
| 45 | 00 00 00 | FLASH待发 |  |
| 48 | 00 00 01 | 已传输 | 从启运开始到现在，已上传成功的温湿度数据的数量。 |
| 51 | 01 | 启用定位 | 0=关闭定位； 1=开启定位； Other=未定义； |
| 52 | 00 | State | 0 = GPS数据； 1 = LBS数据； 2 = 数据无效； other = 未定义； |
| 53 | 00 00 | 保留 |  |
| 55 | 00 00 00 00 00 00 00 00 | 经纬度 | GPS位置信息，byte1, byte2, byte3, byte4, byte5, byte6, byte7, byte8; 经度，有符号数，longitude = (byte1*256*256*256+byte2*256*256+byte3*256+byte4)/1000000，单位：1°；如果longitude小于0则表示西经；如果longitude大于0则表示东经。 纬度，有符号数，latitude = (byte5*256*256*256+byte6*256*256+byte7*256+byte8)/1000000，单位：1°；如果latitude小于0则表示南纬；如果latitude大于0则表示北纬。 |
| 63 | 00 00 | 方向 | 方向，是相对于真北的输出，单位：0.01° |
| 65 | 00 01 | 速度 | 速度，单位: 0.01m/s。 |
| 67 | 01 | 启用蓝牙 | 0 = 未启用蓝牙； 1 = 已启用蓝牙； other = 未定义； |
| 68 | 00 00 00 00 00 00 | 蓝牙打印机MAC |  |
| 74 | 01 | 版本区分 | 00：老协议（不下发行驶里程） 01：新协议（可下发行驶里程） |
| 75 | 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 | 保留位 |  |
| 90 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 92 | EB EB | 结束位 | 固定值 |

2.8.2服务器运输状态数据反馈示例：（服务器→网关）

| EB EB 0D A0 01 00 01 11 11 11 11 00 00 00 00 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 0D | 总长度 | 固定值 |
| 04 | A0 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 对应收到的版本 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 00 | ERROR | 0 = 成功； other = 未定义； |
| 13 | 00 01 | 行驶里程 | 原保留位，现定义为行驶里程，单位：0.1km |
| 15 | 00 00 | 保留位 |  |
| 17 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 19 | BE BE | 结束位 | 固定值 |

2.8.3服务器下发打印布局示例：（服务器→网关）

| EB EB 35 A1 01 00 01 11 11 11 11 00 00 00 00 28 02 00 01 00 03 00 04 00 05 00 06 00 01 00 07 00 08 00 01 00 09 00 01 00 0F 00 0A 00 01 00 0B 00 0C 00 01 00 0D 00 0E 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 35 | 总长度 | 固定值 |
| 04 | A1 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 固定值 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 00 00 00 00 | 保留位 |  |
| 16 | 28 | 布局长度 | 所有布局类型和布局参数的总长度，取值范围：0-64，单位：Byte； 从下一个字节开始计数，直到CRC16，不包含CRC16； |
| 17 | 02 | 布局类型 | 标题 0x00: 无 0x01: 空一行 0x02：标题 0x03: 车辆信息 0x04：网关MAC号和运输码 0x05：开始时间 0x06：结束时间 0x07：最高温度 0x08：最低温度 0x09：Sensor MAC和名称 0x0A：温度列表 0x0B：送货人 0x0C：收货人 0x0D：送货单位 0x0E：当前时间 0x0F：固定字符串 0x10：行驶里程 other：未定义 |
| 18 | 00 | 布局参数 | 标题 0x00: 默认参数 other: 未定义 |
| 19 | 01 | 布局类型 | 空一行 |
| 20 | 00 | 布局参数 | 空一行 |
| 21 | 03 | 布局类型 | 车辆信息 |
| 22 | 00 | 布局参数 | 车辆信息 |
| 23 | 04 | 布局类型 | 网关编号 |
| 24 | 00 | 布局参数 | 网关编号 |
| 25 | 05 | 布局类型 | 开始时间 |
| 26 | 00 | 布局参数 | 开始时间 |
| 27 | 06 | 布局类型 | 结束时间 |
| 28 | 00 | 布局参数 | 结束时间 |
| 29 | 01 | 布局类型 | 空一行 |
| 30 | 00 | 布局参数 | 空一行 |
| 31 | 07 | 布局类型 | 最高温度 |
| 32 | 00 | 布局参数 | 最高温度 |
| 33 | 08 | 布局类型 | 最低温度 |
| 34 | 00 | 布局参数 | 最低温度 |
| 35 | 01 | 布局类型 | 空一行 |
| 36 | 00 | 布局参数 | 空一行 |
| 37 | 09 | 布局类型 | 传感器编号和名称 |
| 38 | 00 | 布局参数 | 传感器编号和名称 |
| 39 | 01 | 布局类型 | 空一行 |
| 40 | 00 | 布局参数 | 空一行 |
| 41 | 0F | 布局类型 | 固定字符串 |
| 42 | 00 | 布局参数 | 固定字符串，默认：如不下发，则为“历史数据” |
| 43 | 0A | 布局类型 | 温度列表 |
| 44 | 00 | 布局参数 | 温度列表 |
| 45 | 01 | 布局类型 | 空一行 |
| 46 | 00 | 布局参数 | 空一行 |
| 47 | 0B | 布局类型 | 送货人 |
| 48 | 00 | 布局参数 | 送货人 |
| 49 | 0C | 布局类型 | 收货人 |
| 50 | 00 | 布局参数 | 收货人 |
| 51 | 01 | 布局类型 | 空一行 |
| 52 | 00 | 布局参数 | 空一行 |
| 53 | 0D | 布局类型 | 送货单位 |
| 54 | 00 | 布局参数 | 送货单位 |
| 55 | 0E | 布局类型 | 当前时间 |
| 56 | 00 | 布局参数 | 当前时间 |
| 57 | 00 00 | CRC16 |  |
| 59 | BE BE | 结束位 | 固定值 |

说明：1、服务器收到网关状态数据包后可反馈该条数据包（此时不要下发绑定、普通反馈、修改网关参数等指令）

2、布局类型前后可以替换、可省略

2.8.4网关收到下发打印布局上报示例：（网关→服务器）

| BE BE 0B A1 01 00 01 11 11 11 11 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 0B | 总长度 | 固定值 |
| 04 | A1 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 固定值 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 00 | 状态 | 有符号数； >=0： 下发成功； <0： 下发失败 |
| 13 | 00 00 | 保留位 |  |
| 15 | 00 00 | CRC16 |  |
| 17 | EB EB | 结束位 | 固定值 |

| 编号 | 16进制 | 有符号数 | 说明 | 备注 |
| --- | --- | --- | --- | --- |
| 1 | FF | -1 | 数据包长度小于最小值 |  |
| 2 | FE | -2 | 协议版本错误 | 下发强制为01 |
| 3 | FD | -3 | 传输序列号错误 |  |
| 4 | FC | -4 | 网关MAC错误 |  |
| 5 | FB | -5 | 布局长度错误 | 布局长度不应该是奇数，布局长度不应超过最大值。 |

2.8.5服务器下发布局内容示例：（服务器→网关）

| BE BE 0B A1 01 00 01 11 11 11 11 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 |  | 总长度 | 固定值 |
| 04 | A2 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 固定值 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 02 | Total | 计划下发的信息的数量，最大值是64。 |
| 13 | 01 | Current | 当前下发的信息的序列号，取值范围：1到64. |
| 14 | 00 | Cmd | 0 = 添加或覆盖一个布局信息； 1 = 删除一个布局信息； 2 = 先删除所有，然后再添加或覆盖一个布局信息； other = 未定义； |
| 15 | 02 | 布局类型 | 0x02：标题 0x03: 车辆信息 0x0D：送货单位 0x0F：固定字符串 |
| 16 | 00 | 布局参数 | 0x00: 默认参数 other: 未定义 |
| 17 | 04 | 内容长度 | 内容的长度，最小值是0，最大值是32，单位：Byte； |
| 18 | 00 00 00 00 | 内容 | 最小长度是0个字节，最大长度是32个字节； 格式是字符串或GB2312汉字编码； |
|  | 00 00 | CRC16 |  |
|  | BE BE | 结束位 | 固定值 |

2.8.6网关收到下发打印布局内容上报示例：（网关→服务器）

| BE BE 10 A2 01 00 01 11 11 11 11 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 10 | 总长度 | 固定值 |
| 04 | A2 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 固定值 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 00 | 状态 | 有符号数； >=0： 下发成功； <0： 下发失败 |
| 13 | 02 | Total | 计划下发的信息的数量，最大值是64。 |
| 14 | 01 | Current | 当前下发的信息的序列号，取值范围：1到64. |
| 15 | 00 | Cmd | 0 = 添加或覆盖一个布局信息； 1 = 删除一个布局信息； 2 = 先删除所有，然后再添加或覆盖一个布局信息； other = 未定义； |
| 16 | 02 | 布局类型 |  |
| 17 | 00 | 布局参数 |  |
| 18 | 00 00 | 保留位 |  |
| 20 | 00 00 | CRC16 |  |
| 22 | EB EB | 结束位 | 固定值 |

| 编号 | 16进制 | 有符号数 | 说明 | 备注 |
| --- | --- | --- | --- | --- |
| 1 | FF | -1 | 数据包长度小于最小值 |  |
| 2 | FE | -2 | 协议版本错误 | 下发强制为01 |
| 3 | FD | -3 | 传输序列号错误 |  |
| 4 | FC | -4 | 网关MAC错误 |  |
| 5 | FB | -5 | 内容长度错误 |  |
| 6 | FA | -6 | 不识别的Cmd |  |
| 7 | F8 | -8 | 不识别的布局类型 |  |
| 8 | F7 | -9 | 此布局类型不支持设置内容 |  |
| 9 | F6 | -10 | 内容长度超过最大值限制 | 最大32个字节 |
| 10 | F5 | -11 | 布局内容已满 | 最大7条 |

2.9网关批量上传数据格式

2.9.1网关批量上传数据上报示例：（网关→服务器）

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BF BF | 起始位 | 固定值 |
| 03 |  | 总长度 | 固定值 |
| 05 | 8F | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 59 | 设备类型 | 59：SGAla-网关 |
| 10 | 01 | 数量 | 数据包的数量，取值范围：1到8。 |
|  | 数据包1 | 各种传感器完整数据包 | 1.41、1.42等类型数据包 |
|  | 数据包2 | 各种传感器完整数据包 | 1.41、1.42等类型数据包 |
|  | 数据包X | 各种传感器完整数据包 | 1.41、1.42等类型数据包，X最小值为1，X最大值为8 |
|  | 00 00 | CRC16 |  |
|  | FB FB | 结束位 | 固定值 |

2.9.2服务器批量上传数据反馈示例：（服务器→网关）

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | FB FB | 起始位 | 固定值 |
| 03 | 00 05 | 总长度 | 固定值 |
| 05 | 8F | 命令 | 固定值 |
| 06 | 01 | 协议版本 | 对应收到的版本 |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 00 | 状态 | 有符号数； >=0: 成功； <0: 失败； -1 = 失败，有下发内容，希望网关逐条发送这组数据； 0 = 成功，无下发内容； |
| 10 | 00 00 | CRC16 |  |
| 12 | BF BF | 结束位 | 固定值 |

2.10网关批量上传数据格式（精简版）

2.10.1网关批量上传数据上报示例：（网关→服务器）

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BF BF | 起始位 | 固定值 |
| 03 |  | 总长度 | 固定值 |
| 05 | 8F | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 59 | 设备类型 | 59：SGAla-网关 |
| 10 | 01 | 数量 | 数据包的数量，取值范围：1到8。 |
| 11 | BE BE | 起始位 | 固定值 |
| 13 | 1B | 总长度 | 固定值 |
| 14 | A5 | 命令 | 固定值 |
| 15 | 01 | 协议版本 |  |
| 16 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 18 | 11 11 11 11 | GW ID | 网关编号 |
| 22 | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
| 26 | 51/5C | SS类型 | 51：M1-无线温湿度记录仪 5C：NTC版温度传感器 |
| 27 | 02 | 协议版本 | SS协议版本 |
| 28 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 34 | 06 | 负载长度 | 固定值(30-59) |
| 35 | 65 | 类型 | 固定值 |
| 36 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 38 | 66 | 类型 | 固定值 |
| 39 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 41 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 43 | EB EB | 结束位 | 固定值 |
|  | BE BE | 起始位 | 固定值 |
|  | 18 | 总长度 | 固定值 |
|  | A5 | 命令 | 固定值 |
|  | 01 | 协议版本 |  |
|  | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
|  | 11 11 11 11 | GW ID | 网关编号 |
|  | 00 00 00 01 | SS ID | 无线温湿度记录仪编号 |
|  | 57 | SS类型 | 57：M2-无线温度记录仪 |
|  | 02 | 协议版本 | SS协议版本 |
|  | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
|  | 06 | 负载长度 | 固定值(30-59) |
|  | 65 | 类型 | 固定值 |
|  | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
|  | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
|  | EB EB | 结束位 | 固定值 |
|  | 数据包X | 温湿度/温度/其他传感器完整数据包 | X最小值为1，X最大值为16 |
|  | 00 00 | CRC16 |  |
|  | FB FB | 结束位 | 固定值 |

2.10.2服务器批量上传数据反馈示例：（服务器→网关）

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | FB FB | 起始位 | 固定值 |
| 03 | 00 05 | 总长度 | 固定值 |
| 05 | 8F | 命令 | 固定值 |
| 06 | 01 | 协议版本 | 对应收到的版本 |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 00 | 状态 | 有符号数； >=0: 成功； <0: 失败； -1 = 失败，有下发内容，希望网关逐条发送这组数据； 0 = 成功，无下发内容； |
| 10 | 00 00 | CRC16 |  |
| 12 | BF BF | 结束位 | 固定值 |

1.9.1仅在验证模式下使用，仅针对M1和NTC的温湿度/温度数据包有效，并且仅在批量组包时按照该格式发送，单条数据仍按照1.4.1的格式上传。

2.11网关上传文件数据格式

2.11.1网关申请传输文件及文件信息数据上报示例：（网关→服务器）

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BF BF | 起始位 | 固定值 |
| 03 |  | 总长度 | 固定值 |
| 05 | 8E | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 6A | 设备类型 | 6A：4G网关 |
| 10 | 10 00 00 00 | GW ID | 网关编号 |
| 14 | 20 04 10 08 00 00 | 上传时间 | BCD码，格式：“20年04月10日08时00分 00秒”。 |
| 20 | 00 00 00 00 | 文件标志码 |  |
| 24 | 00 00 00 00 | 文件大小 | 单位：字节 |
| 28 | 0A | 文件名长度 | 最大值：0x20 |
|  | 00 00 00 00 00 00 00 00 | 文件名 | 最大长度32个字节 |
|  | 00 00 | CRC16 |  |
|  | FB FB | 结束位 | 固定值 |

2.11.2服务器申请结果数据反馈示例：（服务器→网关）

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | FB FB | 起始位 | 固定值 |
| 03 | 00 09 | 总长度 | 固定值 |
| 05 | 8E | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 00 | 状态 | 有符号数； >=0: 允许传输； <0: 拒绝传输； |
| 10 | 00 00 00 00 | 传输码 | 服务器随机生成 |
| 14 | 00 00 | CRC16 |  |
| 16 | FB FB | 结束位 | 固定值 |

2.11.3网关传输文件数据上报示例：（网关→服务器）

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BF BF | 起始位 | 固定值 |
| 03 |  | 总长度 | 固定值 |
| 05 | 8D | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 10 00 00 00 | GW ID | 网关编号 |
| 13 | 00 00 00 00 | 传输码 |  |
| 17 | 00 00 00 00…… | 文件内容 | 文件内容，最大长度是1024B，最小长度是1B。 |
|  | 00 00 | CRC16 |  |
|  | FB FB | 结束位 | 固定值 |

2.11.4服务器传输结果数据反馈示例：（服务器→网关）

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | FB FB | 起始位 | 固定值 |
| 03 | 00 05 | 总长度 | 固定值 |
| 05 | 8D | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 00 | 状态 | 有符号数； >=0: 成功； <0: 失败； |
| 10 | 00 00 | CRC16 |  |
| 12 | BF BF | 结束位 | 固定值 |

2.11.5网关传输结束，校验CRC数据上报示例：（网关→服务器）

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BF BF | 起始位 | 固定值 |
| 03 | 00 0E | 总长度 | 固定值 |
| 05 | 8C | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 10 00 00 00 | GW ID | 网关编号 |
| 13 | 00 00 00 00 | 传输码 |  |
| 17 | 00 00 | 文件CRC16 |  |
| 19 | 00 00 | CRC16 |  |
| 21 | FB FB | 结束位 | 固定值 |

2.11.6服务器校验结果数据反馈示例：（服务器→网关）

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | FB FB | 起始位 | 固定值 |
| 03 | 00 05 | 总长度 | 固定值 |
| 05 | 8C | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 00 | 状态 | 有符号数； >=0: 成功； <0: 失败； |
| 10 | 00 00 | CRC16 |  |
| 12 | BF BF | 结束位 | 固定值 |

2.12网关验证专用数据格式

2.12.1网关温湿度标准数据上报示例：（网关→服务器）

| BF BF 00 69 89 01 00 01 6A 11 11 11 11 60 99 F5 80 10 68 1C 02 60 99 E7 5D C8 00 03 51 03 11 00 00 00 60 99 E7 5D 00 10 00 00 00 00 00 00 01 00 00 00 01 60 99 E5 20 14 0B B8 06 65 03 E8 66 13 88 60 99 E7 5D C8 00 03 51 03 11 00 00 01 60 99 E7 5D 00 10 00 00 00 00 00 00 01 00 00 00 01 60 99 E5 20 14 0B B8 06 65 03 E8 66 3 88 00 00 FB FB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BF BF | 起始位 | 固定值 |
| 03 | 00 69 | 总长度 | 非固定长度 |
| 05 | 89 | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 6A | 设备类型 | 6A：SG6P |
| 10 | 11 11 11 11 | GW ID | 网关编号 |
| 14 | 60 99 F5 80 | 上传时间 | UTC时间，2021-05-11 11:09:33 |
| 18 | 10 68 | 网关电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 20 | 1C | CSQ | 网络信号强度，取值范围：10到31；数值越大，信号越强 |
| 21 | 02 | 数量 | 本条数据包内大包数据量，最大值8 |
| 22 | 60 99 E7 5D | 网关收到时间 | UTC时间，2021-05-11 10:09:33 |
| 26 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 27 | 00 | status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； other = 未定义； |
| 28 | 03 | Cmd | 工作模式 |
| 29 | 51 | DeviceType | Sensor设备类型 |
| 30 | 03 | protocol | 协议版本 |
| 31 | 11 00 00 00 | SS ID | 传感器编号 |
| 35 | 60 99 E7 5D | Sensor发送时间 | UTC时间，2021-05-11 10:09:33 |
| 39 | 00 10 | 毫秒 |  |
| 41 | 00 | 触因 | 0： 主动上报； 1： 远程读取/点播； other： 未定义； |
| 42 | 00 | 待发1 |  |
| 43 | 00 00 00 00 | 待发2 |  |
| 47 | 01 | 数量 | 本条大包内包含几个温湿度点，最大值5 |
| 48 | 00 | 状态 | 数据状态： 0 = 正常数据； 1 = 预警数据； 2 = 报警数据； 10 = 系统启动后的第一个数据包（没有进行过报警条件判断）； 11 = 时间校准后的第一个数据包（没有进行过报警条件判断）； 12 = 执行命令后的第一次传输，允许采集时间非整分（没有进行过报警条件判断）； other = 未定义； |
| 49 | 00 | 报警 | 指明数据报警的具体情况； 低4bit： 0x0: 温度正常； 0x1: 温度超过阈值上限； 0x2: 温度超过阈值下限； 0x4: 温度超过预警值上限； 0x8: 温度超过预警值下限； 高4bit： 0x0: 湿度正常； 0x1: 湿度超过阈值上限； 0x2: 湿度超过阈值下限； 0x4: 湿度超过预警值上限； 0x8: 湿度超过预警值下限； |
| 50 | 00 01 | SS序列号 | 传感器上传数据序列号,每次传输+1 |
| 52 | 60 99 E5 20 | SS采集时间 | UTC时间，2021-05-11 10:00:00 |
| 56 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 57 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 59 | 06 | 负载长度 |  |
| 60 | 65 | 类型 |  |
| 61 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 63 | 66 | 类型 | 固定值 |
| 64 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 66 | 60 99 E7 5D | 网关收到时间 | UTC时间，2021-05-11 10:09:33 |
| 70 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 71 | 00 | status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； other = 未定义； |
| 72 | 03 | Cmd | 工作模式 |
| 73 | 51 | DeviceType | Sensor设备类型 |
| 74 | 03 | protocol | 协议版本 |
| 75 | 11 00 00 01 | SS ID | 传感器编号 |
| 79 | 60 99 E7 5D | Sensor发送时间 | UTC时间，2021-05-11 10:09:33 |
| 83 | 00 10 | 毫秒 |  |
| 85 | 00 | 触因 | 0： 主动上报； 1： 远程读取/点播； other： 未定义； |
| 86 | 00 | 待发1 |  |
| 87 | 00 00 00 00 | 待发2 |  |
| 91 | 01 | 数量 | 本条大包内包含几个温湿度点，最大值5 |
| 92 | 00 | 状态 | 数据状态： 0 = 正常数据； 1 = 预警数据； 2 = 报警数据； 10 = 系统启动后的第一个数据包（没有进行过报警条件判断）； 11 = 时间校准后的第一个数据包（没有进行过报警条件判断）； 12 = 执行命令后的第一次传输，允许采集时间非整分（没有进行过报警条件判断）； other = 未定义； |
| 93 | 00 | 报警 | 指明数据报警的具体情况； 低4bit： 0x0: 温度正常； 0x1: 温度超过阈值上限； 0x2: 温度超过阈值下限； 0x4: 温度超过预警值上限； 0x8: 温度超过预警值下限； 高4bit： 0x0: 湿度正常； 0x1: 湿度超过阈值上限； 0x2: 湿度超过阈值下限； 0x4: 湿度超过预警值上限； 0x8: 湿度超过预警值下限； |
| 94 | 00 01 | SS序列号 | 传感器上传数据序列号,每次传输+1 |
| 96 | 60 99 E5 20 | SS采集时间 | UTC时间，2021-05-11 10:00:00 |
| 100 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 101 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 103 | 06 | 负载长度 |  |
| 104 | 65 | 类型 |  |
| 105 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 107 | 66 | 类型 | 固定值 |
| 108 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 110 | 00 00 | CRC16 |  |
| 112 | FB FB | 结束位 | 固定值 |

2.12.2服务器数据反馈示例：（服务器→网关）

| FB FB 00 05 89 01 00 01 00 00 00 BF BF |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | FB FB | 起始位 | 固定值 |
| 03 | 00 05 | 总长度 | 固定值 |
| 05 | 89 | 命令 | 固定值 |
| 06 | 01 | 协议版本 | 固定值 |
| 07 | 00 01 | 序列号 | 对应收到的序列号 |
| 09 | 00 | 状态 | 有符号数； >=0: 成功； <0: 失败；-1：需要远程修改传感器参数，本条数据需要拆包 |
| 10 | 00 00 | CRC16 |  |
| 12 | BF BF | 结束位 | 固定值 |

2.12.3网关标准包/精简包拆包单条数据上报示例：（网关→服务器）

| BE BE 3C 94 04 00 01 6A 11 11 11 11 60 99 F5 80 10 68 1C 60 99 E7 5D C8 00 03 51 03 11 00 00 00 60 99 E7 5D 00 10 00 00 00 00 00 00 01 00 00 00 01 60 99 E5 20 14 0B B8 06 65 03 E8 66 13 88 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3C | 总长度 | 非固定长度 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 04 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 6A | 设备类型 | 6A：SG6P |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 60 99 F5 80 | 上传时间 | UTC时间，2021-05-11 11:09:33 |
| 17 | 10 68 | 网关电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 19 | 1C | CSQ | 网络信号强度，取值范围：10到31；数值越大，信号越强 |
| 20 | 60 99 E7 5D | 网关收到时间 | UTC时间，2021-05-11 10:09:33 |
| 24 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 25 | 00 | status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； other = 未定义； |
| 26 | 03 | Cmd | 工作模式 |
| 27 | 51 | DeviceType | Sensor设备类型 |
| 28 | 03 | protocol | 协议版本 |
| 29 | 11 00 00 00 | SS ID | 传感器编号 |
| 33 | 60 99 E7 5D | Sensor发送时间 | UTC时间，2021-05-11 10:09:33 |
| 37 | 00 10 | 毫秒 |  |
| 39 | 00 | 触因 | 0： 主动上报； 1： 远程读取/点播； other： 未定义； |
| 40 | 00 | 待发1 |  |
| 41 | 00 00 00 00 | 待发2 |  |
| 45 | 01 | 数量 | 本条大包内包含几个温湿度点，最大值5 |
| 46 | 00 | 状态 | 数据状态： 0 = 正常数据； 1 = 预警数据； 2 = 报警数据； 10 = 系统启动后的第一个数据包（没有进行过报警条件判断）； 11 = 时间校准后的第一个数据包（没有进行过报警条件判断）； 12 = 执行命令后的第一次传输，允许采集时间非整分（没有进行过报警条件判断）； other = 未定义； |
| 47 | 00 | 报警 | 指明数据报警的具体情况； 低4bit： 0x0: 温度正常； 0x1: 温度超过阈值上限； 0x2: 温度超过阈值下限； 0x4: 温度超过预警值上限； 0x8: 温度超过预警值下限； 高4bit： 0x0: 湿度正常； 0x1: 湿度超过阈值上限； 0x2: 湿度超过阈值下限； 0x4: 湿度超过预警值上限； 0x8: 湿度超过预警值下限； |
| 48 | 00 01 | SS序列号 | 传感器上传数据序列号,每次传输+1 |
| 50 | 60 99 E5 20 | SS采集时间 | UTC时间，2021-05-11 10:00:00 |
| 54 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 55 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 57 | 06 | 负载长度 |  |
| 58 | 65 | 类型 |  |
| 59 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 61 | 66 | 类型 | 固定值 |
| 62 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 64 | 00 00 | CRC16 |  |
| 66 | EB EB | 结束位 | 固定值 |

上传该条数据包后，远程下发对应协议“SG5的GSP模式下数据通讯格式0.3.1”

2.12.4服务器拆包单条数据反馈示例：（服务器→网关）

| EB EB 05 94 04 00 01 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 05 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 04 | 协议版本 | 对应收到的版本 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 00 | Status | 有符号数； >=0: 成功； <0: 失败； |
| 09 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 11 | BE BE | 结束位 | 固定值 |

2.12.5网关温湿度精简数据上报示例：（网关→服务器）

| BF BF 00 30 88 01 00 01 11 11 11 11 02 51 03 11 00 00 00 01 60 99 E5 20 06 65 03 E8 66 13 88 51 03 11 00 00 01 01 60 99 E5 20 14 0B B8 06 65 03 E8 66 13 88 00 00 FB FB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BF BF | 起始位 | 固定值 |
| 03 | 00 30 | 总长度 | 非固定长度 |
| 05 | 88 | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 02 | 数量 | 本条数据包内大包数据量，最大值16 |
| 14 | 51 | DeviceType | Sensor设备类型 |
| 15 | 03 | protocol | 协议版本 |
| 16 | 11 00 00 00 | SS ID | 传感器编号 |
| 20 | 01 | 数量 | 本条大包内包含几个温湿度点，最大值5 |
| 21 | 60 99 E5 20 | SS采集时间 | UTC时间，2021-05-11 10:00:00 |
| 25 | 06 | 负载长度 |  |
| 26 | 65 | 类型 |  |
| 27 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 29 | 66 | 类型 | 固定值 |
| 30 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 32 | 51 | DeviceType | Sensor设备类型 |
| 33 | 03 | protocol | 协议版本 |
| 34 | 11 00 00 01 | SS ID | 传感器编号 |
| 38 | 01 | 数量 | 本条大包内包含几个温湿度点，最大值5 |
| 39 | 60 99 E5 20 | SS采集时间 | UTC时间，2021-05-11 10:00:00 |
| 43 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 44 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 46 | 06 | 负载长度 |  |
| 47 | 65 | 类型 |  |
| 48 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 50 | 66 | 类型 | 固定值 |
| 51 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 53 | 00 00 | CRC16 |  |
| 55 | FB FB | 结束位 | 固定值 |

2.12.6服务器数据反馈示例：（服务器→网关）

| FB FB 00 05 88 01 00 01 00 00 00 BF BF |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | FB FB | 起始位 | 固定值 |
| 03 | 00 05 | 总长度 | 固定值 |
| 05 | 88 | 命令 | 固定值 |
| 06 | 01 | 协议版本 | 固定值 |
| 07 | 00 01 | 序列号 | 对应收到的系列号 |
| 09 | 00 | 状态 | 有符号数； >=0: 成功； <0: 失败；-1：需要远程修改传感器参数，本条数据需要拆包 |
| 10 | 00 00 | CRC16 |  |
| 12 | BF BF | 结束位 | 固定值 |

2.12.7标准包/精简包拆包单条数据上报示例：（网关→服务器）同2.12.3

| BE BE 3C 94 04 00 01 6A 11 11 11 11 60 99 F5 80 10 68 1C 60 99 E7 5D C8 00 03 51 03 11 00 00 00 60 99 E7 5D 00 10 00 00 00 00 00 00 01 00 00 00 01 60 99 E5 20 14 0B B8 06 65 03 E8 66 13 88 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 3C | 总长度 | 非固定长度 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 04 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 6A | 设备类型 | 6A：SG6P |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 60 99 F5 80 | 上传时间 | UTC时间，2021-05-11 11:09:33 |
| 17 | 10 68 | 网关电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 19 | 1C | CSQ | 网络信号强度，取值范围：10到31；数值越大，信号越强 |
| 20 | 60 99 E7 5D | 网关收到时间 | UTC时间，2021-05-11 10:09:33 |
| 24 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 25 | 00 | status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； other = 未定义； |
| 26 | 03 | Cmd | 工作模式 |
| 27 | 51 | DeviceType | Sensor设备类型 |
| 28 | 03 | protocol | 协议版本 |
| 29 | 11 00 00 00 | SS ID | 传感器编号 |
| 33 | 60 99 E7 5D | Sensor发送时间 | UTC时间，2021-05-11 10:09:33 |
| 37 | 00 10 | 毫秒 |  |
| 39 | 00 | 触因 | 0： 主动上报； 1： 远程读取/点播； other： 未定义； |
| 40 | 00 | 待发1 |  |
| 41 | 00 00 00 00 | 待发2 |  |
| 45 | 01 | 数量 | 本条大包内包含几个温湿度点，最大值5 |
| 46 | 00 | 状态 | 数据状态： 0 = 正常数据； 1 = 预警数据； 2 = 报警数据； 10 = 系统启动后的第一个数据包（没有进行过报警条件判断）； 11 = 时间校准后的第一个数据包（没有进行过报警条件判断）； 12 = 执行命令后的第一次传输，允许采集时间非整分（没有进行过报警条件判断）； other = 未定义； |
| 47 | 00 | 报警 | 指明数据报警的具体情况； 低4bit： 0x0: 温度正常； 0x1: 温度超过阈值上限； 0x2: 温度超过阈值下限； 0x4: 温度超过预警值上限； 0x8: 温度超过预警值下限； 高4bit： 0x0: 湿度正常； 0x1: 湿度超过阈值上限； 0x2: 湿度超过阈值下限； 0x4: 湿度超过预警值上限； 0x8: 湿度超过预警值下限； |
| 48 | 00 01 | SS序列号 | 传感器上传数据序列号,每次传输+1 |
| 50 | 60 99 E5 20 | SS采集时间 | UTC时间，2021-05-11 10:00:00 |
| 54 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 55 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 57 | 06 | 负载长度 |  |
| 58 | 65 | 类型 |  |
| 59 | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 61 | 66 | 类型 | 固定值 |
| 62 | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
| 64 | 00 00 | CRC16 |  |
| 66 | EB EB | 结束位 | 固定值 |

上传该条数据包后，远程下发对应协议“SG5的GSP模式下数据通讯格式0.3.1”

2.12.8服务器拆包单条数据反馈示例：（服务器→网关）

| EB EB 05 94 04 00 01 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 05 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 04 | 协议版本 | 对应收到的版本 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 00 | Status | 有符号数； >=0: 成功； <0: 失败； |
| 09 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 11 | BE BE | 结束位 | 固定值 |

2.12.9网关验证状态数据上报示例：（网关→服务器）

| BE BE 2F A9 01 01 A2 6A 11 11 11 11 60 99 F5 80 00 00 01 60 99 F5 80 01 60 99 F3 30 0A 0A 0A 00 01 10 68 00 1C 00 00 00 00 00 00 00 00 00 10 00 00 00 00 00 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 2F | 总长度 | 固定值 |
| 04 | A9 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 固定值 |
| 06 | 01 A2 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 6A | 设备类型 | 6A：SG6P |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 60 99 F5 80 | GW上传时间 | UTC时间，2021-05-11 11:09:33 |
| 17 | 00 00 | 采集序列号 |  |
| 19 | 01 | OP | 0： 状态； 1： 开启验证； 2： 结束验证； other： 未定义； |
| 20 | 60 99 F3 30 | OP时间 | UTC时间，2021-05-11 11:00:00 |
| 24 | 0A | 期望绑定 | 期望绑定10个 |
| 25 | 0A | 实际绑定 | 实际绑定10个 |
| 26 | 0A | 接收数量 | 共接收到10个传感器 |
| 27 | 00 | 模式 | 模式： 0 ： 标准； 1 ： 精简； other ： 未定义； |
| 28 | 01 | 转发策略 | 0：转发全部 1：转发绑定 |
| 29 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 31 | 00 | 接入充电 | 0： 未接入充电器； 1： 已接入充电器； other： 未定义； |
| 32 | 1C | CSQ | 网络信号强度，取值范围：10到31；数值越大，信号越强 |
| 33 | 00 | 误码率 |  |
| 34 | 00 | RAM |  |
| 35 | 00 00 00 00 | FLASH待发 |  |
| 39 | 00 00 00 10 | 已传输 | 开启验证后已传输的数据总量 |
| 43 | 00 00 00 00 00 00 00 00 | 保留位 |  |
| 51 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 53 | EB EB | 结束位 | 固定值 |

2.12.10服务器数据反馈示例：（服务器→网关）

| EB EB 0D A9 01 01 A2 11 11 11 11 00 00 00 00 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 0D | 总长度 | 固定值 |
| 04 | A9 | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 固定值 |
| 06 | 01 A2 | 序列号 | 对应收到的系列号 |
| 08 | 11 11 11 11 | GW ID |  |
| 12 | 00 | 结果 | 0 = 成功； other = 未定义； |
| 13 | 00 00 00 00 | 保留位 |  |
| 17 | 00 00 | CRC16 |  |
| 19 | BE BE | 结束位 | 固定值 |

2.12.11网关状态数据上报示例：（网关→服务器）

| BE BE 31 92 03 00 01 6A 11 11 11 11 60 99 F5 80 10 68 00 01 00 01 00 01 00 00 01 00 0A 0A 08 00 00 00 00 1C 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 31 | 总长度 | 固定值 |
| 04 | 92 | 命令 | 固定值 |
| 05 | 03 | 协议版本 | 固定值 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 6A | 设备类型 | 6A：SG6P |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 60 99 F5 80 | GW上传时间 | UTC时间，2021-05-11 11:09:33 |
| 17 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 19 | 00 01 | GW软件主版本 |  |
| 21 | 00 01 | GW软件次版本 |  |
| 23 | 00 01 | 客户码 | 固定值 |
| 25 | 00 00 | Debug |  |
| 27 | 01 | 工作模式 |  |
| 28 | 00 | 转发策略 | 0 = 转发接收到的所有数据包； 1 = 只转发绑定设备的数据包； other = 未定义； |
| 29 | 0A | 期望绑定 |  |
| 30 | 0A | 实际绑定 |  |
| 31 | 0A | 已收到SS数量 |  |
| 32 | 08 | 网络类型 | 0 – no service 1 – GSM 2 – GPRS 3 – EGPRS (EDGE) 4 – WCDMA 5 – HSDPA only(WCDMA) 6 – HSUPA only(WCDMA) 7 – HSPA (HSDPA and HSUPA, WCDMA) 8 – LTE 9 – TDS-CDMA 10 – TDS-HSDPA only 11 – TDS- HSUPA only 12 – TDS- HSPA (HSDPA and HSUPA) 13 – CDMA 14 – EVDO 15 – HYBRID (CDMA and EVDO) 16 – 1XLTE(CDMA and LTE) 23 – eHRPD 24 – HYBRID(CDMA and eHRPD) |
| 33 | 00 00 00 00 | SIM MSIN | 转十进制 |
| 37 | 1C | CSQ | 网络信号强度，取值范围：10到31；数值越大，信号越强 |
| 38 | 00 | 误码率 |  |
| 39 | 00 | RstSrc | 网关重启原因 |
| 40 | 00 | RAM |  |
| 41 | 00 00 00 00 | pflash已存数量 |  |
| 45 | 00 00 00 00 00 00 00 00 | 保留位 |  |
| 53 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 55 | EB EB | 结束位 | 固定值 |

2.12.12服务器网关状态数据反馈示例：（服务器→网关）

| EB EB 0B 92 03 00 01 11 11 11 11 01 01 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 0B | 总长度 | 固定值 |
| 04 | 92 | 命令 | 固定值 |
| 05 | 03 | 协议版本 | 固定值 |
| 06 | 00 01 | 序列号 | 对应收到的系列号 |
| 08 | 11 11 11 11 | GW ID |  |
| 12 | 01 | 总数量 |  |
| 13 | 01 | 序号 | 从1开始计数 |
| 14 | 00 | 状态 | 有符号数； >=0: 成功； <0: 失败； |
| 15 | 00 00 | CRC16 |  |
| 17 | BE BE | 结束位 | 固定值 |

2.12.13服务器期望绑定数量数据反馈示例：（服务器→网关）

| EB EB 0D 93 03 00 01 11 11 11 11 01 01 00 03 0A 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 0D | 总长度 | 固定值 |
| 04 | 93 | 命令 | 固定值 |
| 05 | 03 | 协议版本 | 固定值 |
| 06 | 00 01 | 序列号 | 对应收到的系列号 |
| 08 | 11 11 11 11 | GW ID |  |
| 12 | 01 | 总数量 | 本次通讯数量 |
| 13 | 01 | 序号 | 从1开始计数 |
| 14 | 00 | 状态 | 有符号数； >=0: 成功； <0: 失败； |
| 15 | 03 | CMD | 0 = 新建或覆盖一个绑定关系； 1 = 删除一个绑定关系； 2 = 先删除所有，然后再添加或覆盖一个绑定关系； 3 = 指定期望绑定的设备的数量； other = 未定义； |
| 16 | 0A | 期望数量 | 本次共要绑定10个传感器 |
| 17 | 00 00 | CRC16 |  |
| 19 | BE BE | 结束位 | 固定值 |

2.12.14网关收到期望绑定数量数据上报示例：（网关→服务器）

| BE BE 0C 93 03 00 01 11 11 11 11 0B 02 00 11 00 00 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 0C | 总长度 | 固定值 |
| 04 | 93 | 命令 | 固定值 |
| 05 | 03 | 协议版本 | 固定值 |
| 06 | 00 01 | 序列号 | 对应收到的系列号 |
| 08 | 11 11 11 11 | GW ID |  |
| 12 | 0B | 总数量 |  |
| 13 | 02 | 序号 | 从1开始计数 |
| 14 | 00 | 状态 | 有符号数； >=0: 成功； <0: 失败； |
| 15 | 03 | Cmd | 固定值 |
| 16 | 00 00 | CRC16 |  |
| 18 | EB EB | 结束位 | 固定值 |

2.12.15服务器绑定数据反馈示例：（服务器→网关）

|  |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 总长度 | 总长度 |  |
| 04 | 93 | 命令 | 固定值 |
| 05 | 03 | 协议版本 | 对应收到的版本 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关编号 |
| 12 | 0B | 总数量 |  |
| 13 | 02 | 序号 |  |
| 14 | 00 | 状态 |  |
| 15 | 00 | Cmd | 0 = 新建或覆盖一个绑定关系； 1 = 删除一个绑定关系； 2 = 先删除所有，然后再添加或覆盖一个绑定关系； 3 = 指定期望绑定的设备的数量； other = 未定义； |
| 16 | 00 00 00 01 | SS ID | 需绑定的无线记录仪编号 |
| 20 |  | 配置长度 | 下一位数据类型“65”开始，到CRC前一位。 |
| 21 | 65 | 数据类型 | 固定值 |
| 22 | 00 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 23 | 00 64 | 温度阈值 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 25 | 65 | 数据类型 | 固定值 |
| 26 | 01 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 27 | 03 E8 | 温度阈值 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
| 29 | 66 | 数据类型 | 固定值 |
| 30 | 00 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 31 | 13 88 | 湿度阈值 | RH = (MSB*256+LSB)/100，单位：%； |
| 33 | 66 | 数据类型 | 固定值 |
| 34 | 01 | 阈值类型 | 0 = 阈值下限；1 = 阈值上限； 2 = 预警下限；3 = 预警上限； other = 未定义； |
| 35 | 17 70 | 湿度阈值 | RH = (MSB*256+LSB)/100，单位：%； |
| 37 | 73 | 数据类型 | 固定值 |
|  | 名称长度 | 名称长度 | 名称的长度，其最小值是0，最大值是30，单位：Byte，编码GB2312。 |
|  | 名称 | 名称 | 中文字符，最小值是0，最大值30，单位：个。 |
|  | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
|  | BE BE | 结束位 | 固定值 |

2.12.16网关收到绑定数据上报示例：（网关→服务器）

| BE BE 10 93 03 00 01 11 11 11 11 0B 02 00 00 11 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 10 | 总长度 | 固定值 |
| 04 | 93 | 命令 | 固定值 |
| 05 | 03 | 协议版本 | 固定值 |
| 06 | 00 01 | 序列号 | 对应收到的系列号 |
| 08 | 11 11 11 11 | GW ID |  |
| 12 | 0B | 总数量 |  |
| 13 | 02 | 序号 | 从1开始计数 |
| 14 | 00 | 状态 | 有符号数； >=0: 成功； <0: 失败； |
| 15 | 00 | Cmd | 0 = 新建或覆盖一个绑定关系； 1 = 删除一个绑定关系； 2 = 先删除所有，然后再添加或覆盖一个绑定关系； 3 = 指定期望绑定的设备的数量； other = 未定义； 反馈收到的内容 |
| 16 | 11 00 00 00 | SS ID | 传感器编号，反馈收到的编号 |
| 20 | 00 00 | CRC16 |  |
| 22 | EB EB | 结束位 | 固定值 |

2.12.17网关转发传感器状态数据上报示例：（网关→服务器）

| BE BE 38 AA 01 00 01 6A 11 11 11 11 60 99 F5 80 10 68 1C 60 99 E7 5D C8 00 03 51 03 11 00 00 00 60 99 E7 5D 00 10 00 13 10 01 01 A9 10 04 02 FE 0A 10 0A 02 00 00 10 0B 02 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 38 | 总长度 | 非固定长度 |
| 04 | AA | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 6A | 设备类型 | 6A：SG6P |
| 09 | 11 11 11 11 | GW ID | 网关编号 |
| 13 | 60 99 F5 80 | 上传时间 | UTC时间，2021-05-11 11:09:33 |
| 17 | 10 68 | 网关电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 19 | 1C | CSQ | 网络信号强度，取值范围：10到31；数值越大，信号越强 |
| 20 | 60 99 E7 5D | 网关收到时间 | UTC时间，2021-05-11 10:09:33 |
| 24 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 25 | 00 | status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； other = 未定义； |
| 26 | 03 | Cmd | 模式？ |
| 27 | 51 | DeviceType | Sensor设备类型 |
| 28 | 03 | protocol | 协议版本 |
| 29 | 11 00 00 00 | SS ID | 传感器编号 |
| 33 | 60 99 E7 5D | Sensor发送时间 | UTC时间，2021-05-11 10:09:33 |
| 37 | 00 10 | 毫秒 |  |
| 39 | 00 | 触因 | 0： 主动上报； 1： 远程读取/点播； other： 未定义； |
| 40 | 13 | 负载长度 | 负载长度，负载数据的长度，单位：Byte；非固定值 |
| 41 | 10 01 | 数据类型 |  |
| 43 | 01 | 数据长度 |  |
| 44 | A9 | 设备类型 | M1000 |
| 45 | 10 04 | 数据类型 |  |
| 47 | 02 | 数据长度 |  |
| 48 | FE 0A | 软件版本 | 传感器的软件版本 |
| 50 | 10 0A | 数据类型 |  |
| 52 | 02 | 数据长度 |  |
| 53 | 00 00 | 温度补偿值 |  |
| 55 | 10 0B | 数据类型 |  |
| 57 | 02 | 数据长度 |  |
| 58 | 00 00 | 湿度补偿值 |  |
| 60 | 00 00 | CRC16 |  |
| 62 | EB EB | 结束位 | 固定值 |

2.12.18服务器传感器状态数据反馈示例：（服务器→网关）

| EB EB 05 AA 01 00 01 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 05 | 总长度 | 固定值 |
| 04 | AA | 命令 | 固定值 |
| 05 | 01 | 协议版本 | 对应收到的版本 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 00 | Status | 有符号数； >=0: 成功； <0: 失败； |
| 09 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 11 | BE BE | 结束位 | 固定值 |

2.13报警器数据格式

2.13.1报警器申请数据上报示例：（报警器→服务器）

|  |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BF BF | 起始位 | 固定值 |
| 03 | 00 00 | 总长度 | 非固定长度 |
| 05 | 85 | 命令 | 固定值 |
| 06 | 01 | 协议版本 |  |
| 07 | 00 00 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 09 | 93 | 设备类型 | 93：SG6L-A报警器 |
| 10 | 10 00 00 00 | GW ID | 本机编号 |
| 14 | 60 99 F5 80 | 请求时间 | UTC时间，2021-05-11 11:09:33 |
| 18 | 00 01 | 毫秒 |  |
| 20 | 00 | 请求序列号 | 本条请求若对应多个下发，该请求序列号递增，从0开始。 |
| 21 | 00 A8 | 显示容量 | 最多显示168 |
| 23 | 00 00 | 已使用显示容量 | 已显示0个 |
| 25 | 00 00 00 00 | UID | 保留位 |
| 29 | 00 00 00 00 | ROLE | 保留位 |
| 33 | 00 00 00 00 | Event | 保留位 |
| 37 | 00 00 00 00 | Ctrl | 保留位 |
| 41 | 00 00 00 00 | reserved | 保留位 |
| 45 | 00 | 负载长度 |  |
|  |  | 数据类型 | 负载长度为00时，内容为空 |
|  |  | 数据长度 | 负载长度为00时，内容为空 |
|  |  | 数据内容 | 负载长度为00时，内容为空 |
|  | 00 00 | CRC16 |  |
|  | FB FB | 结束位 |  |

2.13.2服务器显示内容数据反馈示例：（服务器→报警器）

|  |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | FB FB | 起始位 | 固定值 |
|  | 00 00 | 总长度 | 非固定长度，命令位起，至CRC之前 |
|  | 85 | 命令 | 固定值 |
|  | 01 | 协议版本 |  |
|  | 00 00 | 序列号 | 对应收到的 |
|  | 10 00 00 00 | GW ID | 对应收到的报警器编号 |
|  | 00 00 00 00 | 保留位 |  |
|  | 64 | 下发数量 | 本次共需下次几次，最大值是168 |
|  | 00 | 下发序号 | 从0开始计数，与请求序列号保持一致。 |
|  | 00 | 结果 | >=0: 成功； < 0: 失败； |
|  | 27 | 包数 | 本条数据包，包含多少个传感器数据 |
|  | 00 00 00 00 | 保留位 |  |
|  | 11 11 11 11 | SS ID | 1号传感器编号 |
|  | 51 | 传感器类型 | 51：M1 |
|  | 11 00 00 00 | 网关ID | 接收该传感器的网关编号 |
|  | B8 | RSSI |  |
|  | 00 | 状态 | 数据状态： 0 = 正常数据； 1 = 预警数据； 2 = 报警数据； 10 = 系统启动后的第一个数据包（没有进行过报警条件判断）； 11 = 时间校准后的第一个数据包（没有进行过报警条件判断）； 12 = 执行命令后的第一次传输，允许采集时间非整分（没有进行过报警条件判断）； other = 未定义； |
|  | 00 | 报警 | 指明数据报警的具体情况； 低4bit： 0x0: 温度正常； 0x1: 温度超过阈值上限； 0x2: 温度超过阈值下限； 0x4: 温度超过预警值上限； 0x8: 温度超过预警值下限； 高4bit： 0x0: 湿度正常； 0x1: 湿度超过阈值上限； 0x2: 湿度超过阈值下限； 0x4: 湿度超过预警值上限； 0x8: 湿度超过预警值下限； |
|  | 00 01 | SS序列号 |  |
|  | 60 99 F5 80 | SS采集时间 | UTC时间，2021-05-11 11:09:33 |
|  | 00 01 | 毫秒 |  |
|  | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
|  | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
|  | 06 | 负载长度 | 非固定长度 |
|  | 65 | 类型 | 固定值 |
|  | 03 E8 | 温度 | 有符号数，X = MSB*256+LSB，当X>=0x8000时，T = (X-65536)/100，单位：℃；当X<0x8000时，T = X/100，单位：℃； |
|  | 66 | 类型 | 固定值 |
|  | 13 88 | 湿度 | RH = (MSB*256+LSB)/100，单位：%； |
|  |  | 2号、3号…N号传感器 | 一个传感器包：SS ID到湿度，最多32个传感器 |
|  | 00 00 | CRC16 |  |
|  | BF BF | 结束位 |  |

2.14单向数据包格式

2.14.1网关ICCID数据上报示例：（网关→服务器）

| BE BE 1E 81 01 10 00 00 00 6A 16 90 14 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 1E | 总长度 | 固定值 |
| 04 | 81 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 10 00 00 00 | GW ID | 网关编号 |
| 10 | 6A | 设备类型 | SG6P |
| 11 | 16 | 负载长度 | 固定值 |
| 12 | 90 | 数据类型 | 固定值 |
| 13 | 14 | 数据长度 | 固定值 |
| 14 | 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 | ICCID |  |
| 34 | 00 00 | CRC16 |  |
| 36 | EB EB | 结束位 | 固定值 |

2.15电子标签数据包格式

2.15.1转发电子标签数据上报示例：（网关→服务器）

| BE BE 49 94 03 00 01 59 11 11 11 11 17 09 11 16 46 00 10 68 00 00 00 01 00 01 DB 03 29 61 00 10 63 14 64 0B B8 62 17 09 11 15 23 00 67 17 09 11 15 25 00 68 C8 DB 01 00 00 12 34 56 78 00 23 45 67 89 00 00 00 00 00 1A 00 00 1E 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 49 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 59 | 设备类型 | 59：SGAla网关 |
| 09 | 11 11 11 11 | GW ID | 网关 |
| 13 | 17 09 11 16 46 00 | GW传输时间 | BCD码，格式：“17年09月11日16时46分 00秒”。 |
| 19 | 10 68 | GW电压 | U = (MSB*256+LSB)。其中U.bit15是状态位，U.bit14~bit0是数据位。 U.bit15=0，表示未连接充电器； U.bit15=1，表示已连接充电器； U.bit14~bit0表示电池电压，计算方法：电池电压 = U.bit14~bit0/1000，单位：V。 |
| 21 | 00 00 00 01 | SS ID | 传感器编号 |
| 25 | 00 | SS Status | 0 = 正常数据； 1 = 预警数据； 2 = 警告数据； A = 复位后的第一条； B = 授时后的第一条； C =远程修改传感器参数后第一条 D = 传感器故障 E = 开启验证后第一条 F = flash异常 12=按键后的第一条 other = 未定义； |
| 26 | 01 | SS工作模式 |  |
| 27 | DB | SS类型 | DB：电子标签 |
| 28 | 03 | 协议版本 | SS协议版本 |
| 29 | 29 | 负载长度 | 固定值 |
| 30 | 61 | 类型 | 固定值 |
| 31 | 00 10 | SS序列号 | 无线温湿度记录仪上传数据序列号,每次传输+1。 |
| 33 | 63 | 类型 | 固定值 |
| 34 | 14 | 片内温度 | 有符号整形数，表示CC1310内部温度，单位：℃。 |
| 35 | 64 | 类型 | 固定值 |
| 36 | 0B B8 | SS电压 | U= (MSB*256+LSB)/1000，单位：V。 |
| 38 | 62 | 类型 | 固定值 |
| 39 | 17 09 11 15 23 00 | SS采集时间 | 本条数据的采集时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 45 | 67 | 类型 | 固定值 |
| 46 | 17 09 11 15 25 00 | SS传输时间 | 本条数据传输到网关的时间，BCD码，格式：“年 月 日 时 分 秒”。 |
| 52 | 68 | 类型 | 固定值 |
| 53 | C8 | RSSI | 有符号整数，转为十进制后减去256，单位：dBm |
| 54 | DB | 数据类型 |  |
| 55 | 01 | 事件 | <0： 错误； 1：设备空闲，定时上报； 2：刷卡上报，申请鉴权； 3：设备在用，定时上报； 4：未下机，他卡上报； 5：刷卡下机； 6：设备空闲，远程上机； 7：设备在忙，远程下机在上机 8：远程下机； 9：设备空闲，远程下机。 |
| 56 | 00 | CHK | 设备名称的CRC8。服务器若是需要下发修改，则使用命令位0xB0，网关主动唤醒SS。 |
| 57 | 00 | CHK | 设备编号的CRC8。服务器若是需要下发修改，则使用命令位0xB0，网关主动唤醒SS。 |
| 58 | 12 34 56 78 | 使用人RFID |  |
| 62 | 00 | CHK | 本地使用人信息的CRC8。服务器若是需要下发修改，则使用命令位0xB0，网关主动唤醒SS。 |
| 63 | 23 45 67 89 | 新来人RFID |  |
| 67 | 00 | CHK | 管理员的CRC8，服务器若是需要下发修改，则使用命令位0xB1，网关主动唤醒SS。 |
| 68 | 00 00 00 00 | 保留位 |  |
| 72 | 00 | L/H | 表明Sensor目前传输的数据是否是最新的； 0 = 最新数据； 1 = 历史数据； 2 = 最新数据延时发送 other = 未定义； |
| 73 | 1A | 待发1 | Sensor RAM队列中待发数据的数量为26条。 |
| 74 | 00 00 | 待发2 | Sensor Flash队列中待发数据的数量为0条。 |
| 76 | 1E | CSQ | 网络信号强度，取值范围是0到31，0代表信号最弱。1E代表信号值为：30。 |
| 77 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 79 | EB EB | 结束位 | 固定值 |

2.15.2服务器终端数据反馈示例：（服务器→网关）

| EB EB 05 94 03 00 01 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 05 | 总长度 | 固定值 |
| 04 | 94 | 命令 | 固定值 |
| 05 | 03 | 协议版本 | 对应收到的版本 |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 00 | Status |  |
| 09 | 00 00 | CRC16 | 设为00 00可以屏蔽CRC16校验的功能。 |
| 11 | BE BE | 结束位 | 固定值 |

2.15.3服务器下发设备名称示例（服务器→网关）

| EB EB 24 B1 01 00 01 11 11 11 11 52 00 00 00 01 01 19 11 16 46 10 68 00 00 00 01 05 08 DC 06 CA B5 D1 E9 CA D2 00 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 24 | 总长度 | 非固定值 |
| 04 | B1 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关 |
| 12 | 52 00 00 00 | SS ID | 传感器编号 |
| 16 | 01 | 总数量 | 要下发的总数量 |
| 17 | 01 | 序号 | 从1开始计数，当前是第一条 |
| 18 | 19 11 16 46 | UTC时间 | 生成该数据包的时间 |
| 22 | 10 68 | TID | 交易码，随机生成 |
| 24 | 00 00 00 01 | 结束时间/UTC时间 | 网关收到该指令，该指令的最晚可执行时间点，默认加30分钟； |
| 28 | 05 | 远程指令 | 1： 读取； 2： 修改； 3： 触发； 5： 告知； other： 未定义； |
| 29 | 08 | 负载长度 | 红色区域的长度，单位：Byte。在该示例中，负载内容允许调换顺序、部分发送。 |
| 30 | DC | 数据类型 | 固定值 |
| 31 | 06 | 数据长度 | 最大32字节 |
| 32 | CA B5 D1 E9 CA D2 | 设备名称 | GB2312编码，最大长度是32个字节，示例：实验室。 |
| 38 | 00 00 | 协议保留位 |  |
| 40 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 42 | BE BE | 结束位 | 固定值 |

2.15.4服务器下发设备编号示例（服务器→网关）

| EB EB 24 B1 01 00 01 11 11 11 11 52 00 00 00 01 01 19 11 16 46 10 68 00 00 00 01 05 08 DD 06 CA B5 D1 E9 CA D2 00 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 24 | 总长度 | 非固定值 |
| 04 | B1 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关 |
| 12 | 52 00 00 00 | SS ID | 传感器编号 |
| 16 | 01 | 总数量 | 要下发的总数量 |
| 17 | 01 | 序号 | 从1开始计数，当前是第一条 |
| 18 | 19 11 16 46 | UTC时间 | 生成该数据包的时间 |
| 22 | 10 68 | TID | 交易码，随机生成 |
| 24 | 00 00 00 01 | 结束时间/UTC时间 | 网关收到该指令，该指令的最晚可执行时间点，默认加30分钟； |
| 28 | 05 | 远程指令 | 1： 读取； 2： 修改； 3： 触发； 5： 告知； other： 未定义； |
| 29 | 08 | 负载长度 | 红色区域的长度，单位：Byte。在该示例中，负载内容允许调换顺序、部分发送。 |
| 30 | DD | 数据类型 | 固定值 |
| 31 | 06 | 数据长度 | 最大32字节 |
| 32 | CA B5 D1 E9 CA D2 | 设备编号 | GB2312编码，最大长度是32个字节，示例：实验室。 |
| 38 | 00 00 | 协议保留位 |  |
| 40 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 42 | BE BE | 结束位 | 固定值 |

2.15.5服务器下发管理员信息示例（服务器→网关）

| EB EB 24 B1 01 00 01 11 11 11 11 52 00 00 00 01 01 19 11 16 46 10 68 00 00 00 01 05 08 E0 06 CA B5 D1 E9 CA D2 00 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 24 | 总长度 | 非固定值 |
| 04 | B1 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 报警网关一体机编号 |
| 12 | 52 00 00 00 | SS ID | 传感器编号 |
| 16 | 01 | 总数量 | 要下发的总数量 |
| 17 | 01 | 序号 | 从1开始计数，当前是第一条 |
| 18 | 19 11 16 46 | UTC时间 | 生成该数据包的时间 |
| 22 | 10 68 | TID | 交易码，随机生成 |
| 24 | 00 00 00 01 | 结束时间/UTC时间 | 网关收到该指令，该指令的最晚可执行时间点，默认加30分钟； |
| 28 | 05 | 远程指令 | 1： 读取； 2： 修改； 3： 触发； 5： 告知； other： 未定义； |
| 29 | 08 | 负载长度 | 红色区域的长度，单位：Byte。在该示例中，负载内容允许调换顺序、部分发送。 |
| 30 | E0 | 数据类型 | 固定值 |
| 31 | 06 | 数据长度 | 最大32字节 |
| 32 | CA B5 D1 E9 CA D2 | 管理员 | GB2312编码，最大长度是32个字节，示例：实验室。 |
| 38 | 00 00 | 协议保留位 |  |
| 40 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 42 | BE BE | 结束位 | 固定值 |

2.15.6服务器下发持有者信息示例（服务器→网关）

| EB EB 28 B1 01 00 01 11 11 11 11 52 00 00 00 01 01 19 11 16 46 10 68 00 00 00 01 05 08 DE 0A 12 34 56 78 CA B5 D1 E9 CA D2 00 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 28 | 总长度 | 非固定值 |
| 04 | B1 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关 |
| 12 | 52 00 00 00 | SS ID | 传感器编号 |
| 16 | 01 | 总数量 | 要下发的总数量 |
| 17 | 01 | 序号 | 从1开始计数，当前是第一条 |
| 18 | 19 11 16 46 | UTC时间 | 生成该数据包的时间 |
| 22 | 10 68 | TID | 交易码，随机生成 |
| 24 | 00 00 00 01 | 结束时间/UTC时间 | 网关收到该指令，该指令的最晚可执行时间点，默认加30分钟； |
| 28 | 05 | 远程指令 | 1： 读取； 2： 修改； 3： 触发； 5： 告知； other： 未定义； |
| 29 | 08 | 负载长度 | 红色区域的长度，单位：Byte。在该示例中，负载内容允许调换顺序、部分发送。 |
| 30 | DE | 数据类型 | 固定值 |
| 31 | 0A | 数据长度 | 最大36字节 |
| 32 | 12 34 56 78 | RFID |  |
| 36 | CA B5 D1 E9 CA D2 | 持有者信息 | GB2312编码，最大长度是32个字节，示例：实验室。 |
| 42 | 00 00 | 协议保留位 |  |
| 44 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 46 | BE BE | 结束位 | 固定值 |

2.15.7服务器下发鉴权结果示例（服务器→网关）

| EB EB 29 B1 01 00 01 11 11 11 11 52 00 00 00 01 01 19 11 16 46 10 68 00 00 00 01 05 08 E1 0B 00 12 34 56 78 CA B5 D1 E9 CA D2 00 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 29 | 总长度 | 非固定值 |
| 04 | B1 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 报警网关一体机编号 |
| 12 | 52 00 00 00 | SS ID | 传感器编号 |
| 16 | 01 | 总数量 | 要下发的总数量 |
| 17 | 01 | 序号 | 从1开始计数，当前是第一条 |
| 18 | 19 11 16 46 | UTC时间 | 生成该数据包的时间 |
| 22 | 10 68 | TID | 交易码，随机生成 |
| 24 | 00 00 00 01 | 结束时间/UTC时间 | 网关收到该指令，该指令的最晚可执行时间点，默认加30分钟； |
| 28 | 05 | 远程指令 | 1： 读取； 2： 修改； 3： 触发； 5： 告知； other： 未定义； |
| 29 | 08 | 负载长度 | 红色区域的长度，单位：Byte。在该示例中，负载内容允许调换顺序、部分发送。 |
| 30 | E1 | 数据类型 | 固定值 |
| 31 | 0B | 数据长度 | 最大37字节 |
| 32 | 00 | 结果 | ≥0：允许 ＜0：不允许 |
| 33 | 12 34 56 78 | RFID |  |
| 37 | CA B5 D1 E9 CA D2 | RFID信息/拒绝原因 | 若允许，则下发RFID信息；若不允许，则下发拒绝原因； GB2312编码，最大长度是32个字节，示例：实验室。 |
| 43 | 00 00 | 协议保留位 |  |
| 45 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 47 | BE BE | 结束位 | 固定值 |

2.15.8服务器下发修改上机下机状态示例（服务器→网关）

| EB EB 29 B1 01 00 01 11 11 11 11 52 00 00 00 01 01 19 11 16 46 10 68 00 00 00 01 05 09 DF 0B 12 34 56 78 CA B5 D1 E9 CA D2 00 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 29 | 总长度 | 非固定值 |
| 04 | B1 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 报警网关一体机编号 |
| 12 | 52 00 00 00 | SS ID | 传感器编号 |
| 16 | 01 | 总数量 | 要下发的总数量 |
| 17 | 01 | 序号 | 从1开始计数，当前是第一条 |
| 18 | 19 11 16 46 | UTC时间 | 生成该数据包的时间 |
| 22 | 10 68 | TID | 交易码，随机生成 |
| 24 | 00 00 00 01 | 结束时间/UTC时间 | 网关收到该指令，该指令的最晚可执行时间点，默认加30分钟； |
| 28 | 05 | 远程指令 | 1： 读取； 2： 修改； 3： 触发； 5： 告知； other： 未定义； |
| 29 | 09 | 负载长度 | 红色区域的长度，单位：Byte。在该示例中，负载内容允许调换顺序、部分发送。 |
| 30 | DF | 数据类型 | 固定值 |
| 31 | 0B | 数据长度 | 最大37字节 |
| 32 | 01 | OP | 1：上机 2：下机 |
| 33 | 12 34 56 78 | RFID |  |
| 37 | CA B5 D1 E9 CA D2 | 持有者信息 | GB2312编码，最大长度是32个字节，示例：实验室。 |
| 43 | 00 00 | 协议保留位 |  |
| 45 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 47 | BE BE | 结束位 | 固定值 |

2.15.9网关收到，给予反馈（网关→服务器）

| BE BE 0F B1 01 00 01 11 11 11 11 52 00 00 00 01 01 01 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 0F | 总长度 | 固定值 |
| 04 | B1 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | GW序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 11 11 11 11 | GW ID | 网关 |
| 12 | 52 00 00 00 | SS ID | 传感器编号 |
| 16 | 01 | 总数量 |  |
| 17 | 01 | 序号 | 从1开始计数 |
| 18 | 01 | 结果 | 有符号数； < 0 ： 失败； = 0 ： 成功； > 0 ： 成功； |
| 19 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 21 | BE BE | 结束位 | 固定值 |

2.15.10远程命令，执行结束，给予反馈（网关→服务器）

| BE BE 23 A8 01 00 01 A7 11 11 11 11 00 00 00 00 11 11 11 11 DB 19 11 16 46 10 68 05 01 00 00 00 00 04 00 00 00 00 00 00 EB EB |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | BE BE | 起始位 | 固定值 |
| 03 | 23 | 总长度 | 非固定值 |
| 04 | A8 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | A7 | 设备类型 | 网关SG6L的设备类型 |
| 09 | 11 11 11 11 | GW ID |  |
| 13 | 00 00 00 00 | GW传输时间/UTC时间 | 网关产生该条数据的时间 |
| 17 | 11 11 11 11 | SS ID | 传感器编号 |
| 21 | DB | SS类型 | DB：电子标签 |
| 22 | 19 11 16 46 | 交易码/UTC时间 |  |
| 26 | 10 68 | TID | 交易码，随机生成 |
| 28 | 05 | 远程指令 | 1： 读取； 2： 修改； 3： 触发； 5： 告知； other： 未定义； |
| 29 | 01 | 执行结果 | 有符号数； < 0 ： 失败； = 0 ： 成功； > 0 ： 成功； |
| 30 | 00 00 00 00 | SS执行时间/UTC时间 | 传感器端执行命令的时间 |
| 34 | 04 | 负载长度 | 红色区域的长度，单位：Byte，非固定长度。 |
| 35 | 00 00 00 00 | 负载内容 | 暂不需要解析 |
| 39 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 41 | EB EB | 结束位 | 固定值 |

2.15.11反馈：已收到（服务器→网关）

| EB EB 05 A8 01 00 01 00 00 00 BE BE |
| --- |

| 起始位置 (10进制) | 内容 (16进制) | 含义 | 备注 |
| --- | --- | --- | --- |
| 01 | EB EB | 起始位 | 固定值 |
| 03 | 05 | 总长度 | 固定值 |
| 04 | A8 | 命令 | 固定值 |
| 05 | 01 | 协议版本 |  |
| 06 | 00 01 | 序列号 | 每次传输，此序列号递增，最大65535，达到最大值后从1开始。 |
| 08 | 00 | 结果 | 有符号数； < 0 ： 失败； = 0 ： 成功； > 0 ： 成功； |
| 09 | 00 00 | CRC16 | 1. 设为00 00可以屏蔽CRC16校验的功能。 2. CRC16从cmd位开始计算，直到CRC16之前，不包含CRC16。生成多项式：0x1021。 |
| 11 | BE BE | 结束位 | 固定值 |

附录1：设备类型对照表

| 编号 | 设备类型编码（Hex） | 代号 | 设备描述 | 对应设备型号 |
| --- | --- | --- | --- | --- |
| 1 | 51 | M1/M2-PT/M2-ST | 无线温湿度记录仪/M2-PT/M2-ST | M1/M2-PT/M2-ST/M2P-ST/M2P-DL |
| 2 | 52 | SG2 | 无线网关 | / |
| 3 | 56 | USB1 | USB配置工具 | / |
| 4 | 57 | M2 | 无线温度记录仪（已取消） | / |
| 5 | 58 | M4 | 无线功率插座 | M4-10A/M4-16A |
| 6 | 59 | SGAla | 网关 | / |
| 7 | 5C | M1-NTC/M2-1 | NTC版温度传感器/M2-1 | M2-1 |
| 8 | 60 | SG5 | 网关，2G网关 | SG5-ST |
| 9 | 6A | SG6P | 4G网关 | SG6-ST/SG6-DL/SG6-GPS |
| 10 | 73 | SG6X | 4G兼容版网关 | SG6X |
| 11 | 7F | M40 | 无线门磁传感器 | M40 |
| 12 | 77 | M9 | 无线震动传感器 | M9 |
| 13 | 7E | M5 | 大气压强传感器 | M5 |
| 14 | 85 | L1 | 光照传感器 | L1 |
| 15 | 5D | M1-BC | 无线温湿度记录仪 | / |
| 16 | 65 | SG-ST | 本地SHT30 | SG5-ST/SG6-ST内置温湿度探头 |
| 17 | 67 | SG-PT | 本地PT100 | SG6-DL内置低温探头 |
| 18 | 78 | M30 | 二氧化碳传感器 | M30 |
| 19 | 79 | M30 | 二氧化碳传感器的单独一路温湿度传感器 | M30的单独一路温湿度传感器 |
| 20 | 7A | AO2 | 氧气传感器 | AO2 |
| 21 | 8F | AC2 | 生物安全柜专用设备 | AC2 |
| 22 | 90 | M44 | 485传感器的CO2 | M44 |
| 23 | 8C | M44 | M44内置温湿度传感器 | M44的单独一路温湿度传感器 |
| 24 | 91 | M44 | 485传感器的O2 | M44的氧气数据包 |
| 25 | 9D | EK | 智能电子锁 | EK1/EK2 |
| 26 | 9E | EK | 智能电子锁单独一路温湿度传感器 | EK1 |
| 27 | 9F | M60 | 6系 | 作为网关的设备类型 |
| 28 | A1 | M60_SHT30 | 6系列的温湿度 |  |
| 29 | A2 | M60_MAX31855 | 6系列的温度 |  |
| 30 | A3 | M70_SHT30 | 7系列的温湿度 |  |
| 31 | A4 | M70_MAX31855 | 7系列的温度 |  |
| 32 | 86 | SG6M | 新4G网关 |  |
| 33 | A9 | M1000 | 温湿度传感器 |  |
| 34 | A7 | SG6L |  |  |
| 35 | 6D | 611 | 611系列 | 包含SHT30和PT100 |
| 36 | 93 | SG10 | 无屏幕网关 |  |
| 37 | BA | M70P | SHT30 |  |
| 38 | BB | M70P | PT100版本 |  |
| 39 | BC | M70P | 维萨拉485版HMP110/M700-1接GMP251修改debug |  |
| 40 | BE | M70P | PT1000版本 |  |
| 41 | BF | M70P | 罗卓尼克HC2A |  |
| 42 | 9A | SG6E | M4000以太网网关 |  |
| 43 | B2 | SG6EL | SG6L版本的以太网网关 |  |
| 44 | A7 | SG6L-A | SG6L 4G远程报警器 |  |
| 45 | B2 | SG6EL-A | SG6EL以太网远程报警器 |  |
| 46 | C8 | M700 | SHT30/SHT35/串口PT100 |  |
| 47 | C9 | M700 | 维萨拉485版HMP110/GMP251 |  |
| 48 | CA | M700 | 罗卓尼克HC2A |  |
| 49 | D5 | M700E |  | 作为网关的设备类型 |
| 50 | D6 | M700E | SHT30 |  |
| 51 | D7 | M700E | 维萨拉HMP110/ Feel压差 |  |
| 52 | CD | SG7L | 4G网关 |  |
| 53 | D2 | SG7M | 4G网关 |  |
| 54 | B1 | M4000 | 485传感器 |  |
| 55 | DB | ELB | 电子标签 |  |
| 56 | BD | M200L | 内置温湿度/外置温湿度/外置低温 |  |

附录2：数据编码

| 编号 | 数据类型编码（Hex） | 数据长度（byte） | 数据描述 |
| --- | --- | --- | --- |
| 1 | 60 | 1 | 设备类型，参见《设备类型》sheet表格。 |
| 2 | 61 | 2 | 采集序列号，计算方法：S = MSB*256 + LSB。 |
| 3 | 62 | 6 | Sensor采集时间，东8区时间，BCD码格式，“YY MM DD HH mm SS”即“年、月、日、时、分、秒”。 |
| 4 | 63 | 1 | MCU的片内温度，有符号整数，单位：℃。 |
| 5 | 64 | 2 | 电池电压，计算方法：U = （MSB*256 + LSB）/ 1000，单位：V。 |
| 6 | 65 | 2 | 传感器温度，计算方法：T = X/100，单位：℃。其中，X = （MSB*256 + LSB），X是一个有符号整数。 |
| 7 | 66 | 2 | 传感器湿度，计算方法：RH =（MSB*256 + LSB）/ 100，单位：%。 |
| 8 | 67 | 6 | Sensor传输时间，东8区时间，BCD码格式，“YY MM DD HH mm SS”即“年、月、日、时、分、秒”。 |
| 9 | 68 | 1 | RSSI，接收信号强度，有符号整数，转为十进制后减去256，单位：dBm |
| 10 | 69 | 1 | CSQ，网络信号强度，无符号数，取值范围：0至31,0代表信号最弱，31代表信号最强。 |
| 11 | 6A | 2 | GW端的软件版本 |
| 12 | 6B | 2 | GW端电池电压，计算方法：U = （MSB*256 + LSB）/ 1000，单位：V。 |
| 13 | 6C | 1 | GW端RAM中存储的数据的数量，无符号整型数。 |
| 14 | 6D | 3 | GW端pflash中存储的数据的数量 = byte1*256*256+byte2*256+byte3。 |
| 15 | 6E | 3 | GW端上次成功上传数据的数量 = byte1*256+byte2。 |
| 16 | 6F | 2 | GW端上次传输的结果。 |
| 17 | 70 | 10 | SIM卡 ICCID |
| 18 | 71 | 2 | 负载功率，计算方法：U = MSB*256 + LSB，单位：W。 |
| 19 | 72 | 2 | 供电电压（交流电压的有效值），计算方法：U = MSB*256 + LSB，单位：V。 |
| 20 | 73 | 0 <= x <= 30 | 名称，报警器显示的Sensor的名称 |
| 21 | 74 | 2 | 第一个字节：服务器端绑定Sensor设备的数量，最大值是64；第二个字节：网关端接收到Sensor设备的数量，最大值是64； |
| 22 | 75 | 4 | SIM卡No. 十进制数的末尾8位。 |